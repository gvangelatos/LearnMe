import{a as Q}from"./chunk-4H7UWIJQ.js";import{b as H}from"./chunk-DUSAXJ4B.js";import{a as N}from"./chunk-3GJPDCPF.js";import{a as q,f as z}from"./chunk-77RKG7JI.js";import{$ as C,Aa as k,C as _,Eb as L,Ga as M,Ha as A,Ib as E,Jb as R,L as s,Lb as V,Ob as j,Pb as F,Ra as O,Tb as $,U as y,Wb as B,Xb as D,Zb as W,aa as b,ac as G,ba as S,ca as I,da as d,ea as l,fa as o,ga as u,j as v,ka as w,la as x,ma as c,q as T,t as p,v as m,w as g,xa as h,za as P}from"./chunk-33V6LGE3.js";import"./chunk-ZO533RPQ.js";import"./chunk-CEKJCJ5E.js";import"./chunk-HF35MVHV.js";import"./chunk-65LW6U7E.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-H3Z6NBHK.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var J=(()=>{let n=class n{shuffleArray(t){let e=[...t],a=e.length;for(;a!=0;){let f=Math.floor(Math.random()*a);a--,[e[a],e[f]]=[e[f],e[a]]}return[...e]}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var X=["class","page"],Y=(i,n)=>n+"-"+i;function Z(i,n){i&1&&(l(0,"div",2)(1,"ion-label"),h(2,"Getting you a word..."),o(),u(3,"ion-spinner",3),o())}function ee(i,n){if(i&1){let r=w();l(0,"ion-button",13),x("click",function(){let e=m(r),a=e.$implicit,f=e.$index,K=c(2);return g(K.answeredClicked(a,f))}),h(1),M(2,"titlecase"),o()}if(i&2){let r=n.$implicit,t=n.$index,e=c(2);d("disabled",e.isLoading)("color",e.getButtonColor(t)),s(),P(" ",A(2,3,r)," ")}}function te(i,n){if(i&1){let r=w();l(0,"div",12)(1,"ion-button",14),x("click",function(){m(r);let e=c(2);return g(e.handleRefresh())}),h(2," Next "),u(3,"ion-icon",15),o()()}if(i&2){let r=c(2);s(),d("color",r.getTextColor())("disabled",r.isLoading)}}function ne(i,n){if(i&1){let r=w();l(0,"ion-refresher",4),x("ionRefresh",function(){m(r);let e=c();return g(e.handleRefresh())}),u(1,"ion-refresher-content"),o(),l(2,"div",5)(3,"div",6)(4,"ion-text",7)(5,"span",8),h(6),o()()(),l(7,"div",9)(8,"div",10),S(9,ee,3,5,"ion-button",11,Y),o()(),C(11,te,4,2,"div",12),o()}if(i&2){let r=c();s(4),d("color",r.getTextColor()),s(2),k(" ",r.word.article?r.word.article+" ":"","",r.word.german_translation," "),s(3),I(r.answers()),s(2),b(r.answered?11:-1)}}var me=(()=>{let n=class n{constructor(){this.gsApiService=p(Q),this.utilityService=p(J),this.localStorageService=p(H),this.isCorrect=!1,this.answered=!1,this.isLoading=!1,this.wordCards=_([]),this.answers=_([]),N({languageOutline:z,arrowForwardOutline:q}),this.isLoading=!0,this.makeWordCall()}makeWordCall(){this.gsApiService.getRandomWords(this.wordCards().map(t=>+t.id),4).pipe(v(1)).subscribe({next:t=>{this.answers.set(this.utilityService.shuffleArray(t.map(e=>e.english_translation))),this.isLoading=!1,t.length&&(this.word=t[0],this.correctAnswer=this.answers().findIndex(e=>e.toLowerCase()===this.word?.english_translation?.toLowerCase()))},error:t=>{this.isLoading=!1}})}resetQuestion(){this.isCorrect=!1,this.answered=!1,this.correctAnswer=void 0,this.chosenAnswer=void 0,this.word=void 0,this.answers.set([]),this.wordCards.set([])}answeredClicked(t,e){!this.word||this.answered||(this.chosenAnswer=e,t.toLowerCase()===this.word?.english_translation?.toLowerCase()?this.handleAnswer(!0):this.handleAnswer(!1))}handleAnswer(t){t?this.localStorageService.addTranslationsPageSuccess():this.localStorageService.addTranslationsPageFailure(),this.isCorrect=t,this.answered=!0}getButtonColor(t){return this.answered?t===this.correctAnswer?"success":t===this.chosenAnswer?"danger":"dark":"dark"}getTextColor(){return this.answered?this.isCorrect?"success":"danger":"dark"}handleRefresh(){this.resetQuestion(),this.makeWordCall()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=y({type:n,selectors:[["app-translations-tab",8,"page"]],attrs:X,decls:7,vars:4,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"spinner-container"],["name","lines-sharp"],["slot","fixed",3,"ionRefresh"],[1,"main-container"],[1,"word-container"],[3,"color"],[1,"german-translation"],[1,"question-container"],[1,"choices"],[1,"article-btn",3,"disabled","color"],[1,"next-button"],[1,"article-btn",3,"click","disabled","color"],["shape","round",1,"next",3,"click","color","disabled"],["slot","end","name","arrow-forward-outline"]],template:function(e,a){e&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),h(3," Guess The Translation "),o()()(),l(4,"ion-content",1),C(5,Z,4,0,"div",2)(6,ne,12,4),o()),e&2&&(d("translucent",!0),s(4),d("forceOverscroll",!1)("fullscreen",!0),s(),b(!a.word||a.isLoading?5:6))},dependencies:[E,R,D,W,V,$,j,F,B,L,G,O],styles:[".article-card[_ngcontent-%COMP%]{display:inline-block;margin:0;box-shadow:1px 2px #888}ion-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;font-weight:700}.word-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;align-items:center;font-weight:700;font-size:xx-large;color:var(--ion-color-dark-shade);flex-direction:column}.article-btn[_ngcontent-%COMP%]{font-weight:700;--box-shadow: 3px 5px #888}.next[_ngcontent-%COMP%]{font-weight:700}.translation-btn[_ngcontent-%COMP%]{margin-bottom:22px;font-size:10px}.main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,1fr);height:100%;justify-content:center;position:relative}.next-button[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;width:100%;display:flex;align-items:center;justify-content:end}.choices[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;padding:8px;width:100%}.question-container[_ngcontent-%COMP%]{width:100%;align-items:end;display:flex;margin-bottom:10vh}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;height:100%;justify-content:center;gap:8px}"]});let i=n;return i})();export{me as TranslationsTabPage};
