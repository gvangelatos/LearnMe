import{a as q}from"./chunk-5CPTF3PV.js";import{a as K}from"./chunk-CAQ4NDHH.js";import{a as Q}from"./chunk-VPWQN3RI.js";import{$ as C,Aa as x,C as E,Ia as w,Ja as k,L as o,La as P,Lb as R,Ma as T,Oa as W,Ob as G,Sb as N,Tb as U,U as O,Xa as V,Y as I,aa as v,ba as b,bc as j,ca as u,d as F,da as p,ea as l,fa as s,ga as a,gc as $,ha as M,ic as H,j as D,la as f,ma as S,na as c,qc as y,sc as L,t as h,v as m,w as _,xa as A,ya as g}from"./chunk-3M6VVXZC.js";import"./chunk-XFTDMII6.js";import"./chunk-TWXWFH2W.js";import"./chunk-XSYUFH4D.js";import"./chunk-252GNU6G.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-SPMQWSIB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as B}from"./chunk-JHI3MBHO.js";var X=["class","page"],Y=()=>[.15,.5],z=()=>[],J=i=>({"choice-btn":!0,gelatin:i}),Z=(i,r)=>r.english_translation+"-left-"+i,ee=(i,r)=>r.german_translation+"-right-"+i;function te(i,r){i&1&&M(0,"ion-skeleton-text",5),i&2&&l("animated",!0)}function ie(i,r){i&1&&M(0,"ion-skeleton-text",5),i&2&&l("animated",!0)}function ne(i,r){if(i&1&&(s(0,"div",2)(1,"div",4),u(2,te,1,1,"ion-skeleton-text",5,b),a(),s(4,"div",6),u(5,ie,1,1,"ion-skeleton-text",5,b),a()()),i&2){let n=c();o(2),p(w(0,z).constructor(n.matchingPairs)),o(3),p(w(1,z).constructor(n.matchingPairs))}}function re(i,r){if(i&1){let n=f();s(0,"ion-button",8),S("click",function(){let t=m(n).$implicit,d=c(2);return _(d.answeredClicked(t,!0))}),g(1),P(2,"titlecase"),a()}if(i&2){let n=r.$implicit,e=c(2);A(k(7,J,e.gelatin(n,!0))),l("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!0)),o(),x(" ",T(2,5,n.english_translation)," ")}}function oe(i,r){if(i&1){let n=f();s(0,"ion-button",8),S("click",function(){let t=m(n).$implicit,d=c(2);return _(d.answeredClicked(t,!1))}),g(1),P(2,"titlecase"),a()}if(i&2){let n=r.$implicit,e=c(2);A(k(7,J,e.gelatin(n,!1))),l("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!1)),o(),x(" ",T(2,5,n.german_translation)," ")}}function se(i,r){if(i&1&&(s(0,"div",2)(1,"div",4),u(2,re,3,9,"ion-button",7,Z),a(),s(4,"div",6),u(5,oe,3,9,"ion-button",7,ee),a()()),i&2){let n=c();o(2),p(n.wordSets()[0].left),o(3),p(n.wordSets()[0].right)}}function ae(i,r){if(i&1){let n=f();s(0,"ion-button",10),S("click",function(){m(n);let t=c(2);return _(t.wrongAnswer?t.handleMistakeDismiss():t.handleRefresh())}),g(1),a()}if(i&2){let n=c(2);l("color",n.getTextColor()),o(),x(" ",n.wrongAnswer?"Oops..!":"Next"," ")}}function ce(i,r){if(i&1&&C(0,ae,2,2,"ion-button",9),i&2){let n=c();v(n.isGameDone()||n.wrongAnswer?0:-1)}}var le=3,de=5,ve=(()=>{let r=class r{constructor(){this.gsApiService=h(K),this.utilityService=h(q),this.hapticsService=h(Q),this.localStorageService=h(L),this.wordSets=E([]),this.foundWords=[],this.matchingPairs=5,this.getMatchingPairsStorageData(),W(()=>{this.wordSets().length<le&&this.getWordsSet()})}ionViewWillEnter(){this.getMatchingPairsStorageData(!0)}getMatchingPairsStorageData(e=!1){let t=this.localStorageService.getItem(y.MatchPairs);t===null?(this.matchingPairs=5,this.localStorageService.setItem(y.MatchPairs,this.matchingPairs)):(e&&this.matchingPairs!==t&&this.wordSets.set([]),this.matchingPairs=t)}getTextColor(){return this.wrongAnswer?"danger":this.isGameDone()?"success":"dark"}handleRefresh(){this.resetQuestion()}handleMistakeDismiss(){this.wrongAnswer=void 0,this.chosenAnswer=void 0}resetQuestion(){this.chosenAnswer=void 0,this.wrongAnswer=void 0,this.foundWords=[],this.wordSets.update(e=>e.splice(1))}answeredClicked(e,t){if(this.wordSets()[0]){if(e.id===this.chosenAnswer?.word?.id&&t===this.chosenAnswer?.left&&!this.isButtonFound(e)){this.chosenAnswer=void 0;return}this.chosenAnswer?t===this.chosenAnswer?.left?this.chosenAnswer={word:e,left:t}:t!==this.chosenAnswer?.left&&(this.chosenAnswer?.word?.id===e?.id?(this.foundWords.push(e),this.wrongAnswer=void 0,this.chosenAnswer=void 0,this.handleStatisticsUpdateAnswerStatus(!0),this.hapticsService.vibrateSuccess()):(this.wrongAnswer=e,this.handleStatisticsUpdateAnswerStatus(!1),this.hapticsService.vibrateError())):this.chosenAnswer={word:e,left:t}}}handleStatisticsUpdateAnswerStatus(e){e?this.localStorageService.addMatchPageSuccess():this.localStorageService.addMatchPageFailure()}isGameDone(){return this.foundWords.length===de}isButtonFound(e){return this.foundWords.some(t=>t.id===e.id)}isButtonMistake(e){return this.wrongAnswer?.id===e.id}gelatin(e,t){return this.isButtonMistake(e)&&t!==this.chosenAnswer?.left||this.isButtonActiveChoice(e,t)||this.isButtonFound(e)}isButtonActiveChoice(e,t){return e.id===this.chosenAnswer?.word?.id&&t===this.chosenAnswer?.left&&!this.isButtonFound(e)}getButtonColor(e,t){if(this.wordSets()[0])return this.isButtonMistake(e)&&t!==this.chosenAnswer?.left?"danger":this.isButtonActiveChoice(e,t)?this.wrongAnswer?"danger":"warning":this.isButtonFound(e)?"success":"dark"}getWordsSet(){this.gsApiService.getRandomWords([],this.matchingPairs).pipe(F(e=>({left:this.utilityService.shuffleArray(e),right:this.utilityService.shuffleArray(e)})),D(1)).subscribe({next:e=>{this.wordSets.update(t=>(t.push(B({},e)),[...t]))},error:e=>{}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=O({type:r,selectors:[["app-matching-tab",8,"page"]],attrs:X,decls:9,vars:12,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"main-container"],[3,"isOpen","keyboardClose","backdropDismiss","handle","draggable","initialBreakpoint","breakpoints"],[1,"left"],[3,"animated"],[1,"right"],["fill","outline",3,"class","disabled","color"],["fill","outline",3,"click","disabled","color"],["shape","round",1,"next",3,"color"],["shape","round",1,"next",3,"click","color"]],template:function(t,d){t&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),g(3," Word Match "),a()()(),s(4,"ion-content",1),C(5,ne,7,2,"div",2)(6,se,7,0,"div",2),a(),s(7,"ion-modal",3),I(8,ce,1,1,"ng-template"),a()),t&2&&(l("translucent",!0),o(4),l("forceOverscroll",!1)("fullscreen",!0),o(),v(d.wordSets().length?6:5),o(2),l("isOpen",d.isGameDone()||!!d.wrongAnswer)("keyboardClose",!1)("backdropDismiss",!1)("handle",!1)("draggable",!1)("initialBreakpoint",.15)("breakpoints",w(11,Y)))},dependencies:[G,N,U,$,H,R,j,V],styles:[".main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);height:100%;justify-content:center;position:relative}.main-container[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:50px}.no-ripple[_ngcontent-%COMP%]{--ripple-color: transparent}.next[_ngcontent-%COMP%]{font-weight:700;margin:12px}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1rem;padding:.5rem}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;height:100%;justify-content:center;gap:8px}"]});let i=r;return i})();export{ve as MatchingTabPage};
