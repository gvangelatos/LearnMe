import{b as ae,d as re}from"./chunk-SMI4RDV3.js";import{a as oe}from"./chunk-ZKAHJ4OB.js";import"./chunk-PT2JM3JA.js";import{a as ne}from"./chunk-JYXH4C46.js";import{Aa as O,Ac as te,Ba as z,Bb as $,Ca as A,Cb as R,Cc as ie,Eb as U,J as l,Lb as q,Rb as J,S as b,Tb as K,Wb as Q,Z as w,_ as C,_b as X,aa as I,ba as T,ca as m,da as o,dc as Z,ea as s,fa as E,fb as B,fc as ee,gb as L,j as y,ja as D,jb as V,ka as f,la as p,mb as W,pb as F,s as d,tb as G,u as g,ub as j,v,vb as H,wa as c,wb as N,xb as Y,ya as k,za as P}from"./chunk-P45QBID6.js";import"./chunk-THTHWAQ6.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4DJMDNC5.js";import"./chunk-FKJDL3M2.js";import"./chunk-YIHCPKBH.js";import"./chunk-VPLLFS7J.js";import"./chunk-KPN2SSRA.js";import"./chunk-C64N4FA3.js";import"./chunk-SMEE54TN.js";import"./chunk-BMJVVMK5.js";import"./chunk-R2VG4DQ6.js";import"./chunk-ZID3IQXP.js";import"./chunk-KI7QKDP2.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-Z4W4WSBC.js";import"./chunk-CKP3SGE2.js";import"./chunk-FPZUIWVF.js";import"./chunk-6YT5GN4E.js";import"./chunk-VDFYVGMU.js";import"./chunk-FS7NKJS5.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-SPMQWSIB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as _,b as S,g as M}from"./chunk-2R6CW7ES.js";var se=["class","page"],le=(e,a)=>a.word.id;function ce(e,a){if(e&1&&(o(0,"div",7),E(1,"ngx-charts-bar-horizontal",9),s()),e&2){let n=p(2);l(),m("results",n.visualizationChartData)("gradient",!0)("wrapTicks",!1)("legend",!1)("xAxis",!0)("yAxis",!0)("showDataLabel",!0)("maxYAxisTickLength",5)}}function de(e,a){if(e&1){let n=D();o(0,"swiper-slide")(1,"ion-card",10)(2,"ion-card-content")(3,"div",11),c(4),s(),o(5,"div",12),c(6),s(),o(7,"div",13),c(8),s(),o(9,"ion-button",14),f("click",function(){let t=g(n).$implicit,i=p(3);return v(i.presentActionSheet(t.word))}),o(10,"ion-icon",15),f("click",function(){g(n);let t=p(3);return v(t.vibrate())}),s()()()()()}if(e&2){let n=a.$implicit;l(4),k("",n.times," Times Wrong"),l(2),P(" ",n.word.article?n.word.article+" ":"","",n.word.german_translation," "),l(2),k(' "',n.word.english_translation,'" ')}}function me(e,a){if(e&1&&(o(0,"swiper-container",8),I(1,de,11,4,"swiper-slide",null,le),s()),e&2){let n=p(2);l(),T(n.wordsMistakes)}}function pe(e,a){if(e&1&&(o(0,"div",6),w(1,ce,2,8,"div",7)(2,me,3,0,"swiper-container",8),s()),e&2){let n=p();l(),C(n.visualizationType===n.SelectionsEnum.Graph?1:n.visualizationType===n.SelectionsEnum.Cards?2:-1)}}var x=(function(e){return e.Graph="graph",e.Cards="cards",e})(x||{}),Ee=(()=>{let a=class a{constructor(){this.gsApiService=d(oe),this.navController=d(W),this.hapticsService=d(ne),this.mistakesService=d(ie),this.actionSheetCtrl=d(Z),this.wordsMistakes=[],this.visualizationChartData=[],this.visualizationType=x.Cards,this.mistakes=[],this.SelectionsEnum=x,ee({trashOutline:te})}presentActionSheet(r){return M(this,null,function*(){yield(yield this.actionSheetCtrl.create({header:`Delete word "${r.german_translation}" and all it's data form Mistakes?`,buttons:[{text:"Delete",role:"destructive",data:{action:"delete"},handler:()=>{let i=this.mistakesService.removeMistakeData(r.id);i!==void 0&&i<=3&&this.navController.navigateBack(""),this.ionViewWillEnter()}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]})).present()})}ionViewWillEnter(){let r=this.mistakesService.initializeMistakes()??[];this.mistakes=r.sort(this.sort),this.mistakes=this.mistakes.slice(0,10),this.gsApiService.getSpecificWordsData(this.mistakes.map(t=>+t.wordID),this.mistakes.length).pipe(y(1)).subscribe(t=>{this.wordsMistakes=[],t.forEach(i=>{let u=this.mistakes.find(h=>+h.wordID==+i.id);u&&this.wordsMistakes.push(S(_({},u),{word:_({},i)}))}),this.visualizationChartData=this.wordsMistakes.sort(this.sort).map(i=>({value:i.times,name:i.word.german_translation}))})}vibrate(){this.hapticsService.vibrateDefault()}sort(r,t){return r.times<t.times?1:r.times>t.times||r.wordID<t.wordID?-1:r.wordID>t.wordID?1:0}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=b({type:a,selectors:[["app-mistakes",8,"page"]],attrs:se,decls:15,vars:7,consts:[[3,"translucent"],["slot","start"],["default-href","/tabs/home-page","color","dark",3,"click"],["label","Floating label","label-placement","floating",3,"ngModelChange","ngModel"],[3,"value"],[3,"forceOverscroll","fullscreen"],[1,"main-container"],[1,"graph-container"],["effect","cards","cards-effect-perSlideOffset","8","cards-effect-perSlideRotate","2","cards-effect-slideShadows","true","cards-effect-rotate","true"],[3,"results","gradient","wrapTicks","legend","xAxis","yAxis","showDataLabel","maxYAxisTickLength"],[1,"word-text"],[1,"mistakes-number"],[1,"german-word-translation"],[1,"english-word-translation"],["id","open-action-sheet-mistakes","fill","clear","color","dark",1,"clear-word-btn",3,"click"],["color","danger","slot","icon-only","name","trash-outline",3,"click"]],template:function(t,i){t&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-back-button",2),f("click",function(){return i.vibrate()}),s()(),o(4,"ion-title"),c(5," My Mistakes"),s()(),o(6,"ion-list")(7,"ion-item")(8,"ion-select",3),A("ngModelChange",function(h){return z(i.visualizationType,h)||(i.visualizationType=h),h}),o(9,"ion-select-option",4),c(10," Graph "),s(),o(11,"ion-select-option",4),c(12," Cards "),s()()()()(),o(13,"ion-content",5),w(14,pe,3,1,"div",6),s()),t&2&&(m("translucent",!0),l(8),O("ngModel",i.visualizationType),l(),m("value",i.SelectionsEnum.Graph),l(2),m("value",i.SelectionsEnum.Cards),l(2),m("forceOverscroll",!1)("fullscreen",!0),l(),C(i.wordsMistakes.length?14:-1))},dependencies:[F,j,Y,$,J,K,re,ae,U,R,X,q,V,B,L,H,N,G,Q],styles:[".graph-container[_ngcontent-%COMP%]{height:50vh;width:100%}.main-container[_ngcontent-%COMP%]{height:90%;width:100vw;display:flex;align-items:center}.word-text[_ngcontent-%COMP%]{width:70vw;height:50vh;text-align:center;display:flex;flex-direction:column;align-content:center;justify-content:center;border-radius:10px;font-size:20px;color:var(--ion-text-color-step-400);position:relative}.german-word-translation[_ngcontent-%COMP%]{font-size:xx-large}swiper-container[_ngcontent-%COMP%]{width:100%;height:100%}swiper-slide[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}ion-card-content[_ngcontent-%COMP%]{height:100%;display:contents;position:relative}.clear-word-btn[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px}"]});let e=a;return e})();export{Ee as MistakesPage};
