import{a as Y}from"./chunk-NV3BJ2B3.js";import{b as Z}from"./chunk-KL2RSWLH.js";import{a as U}from"./chunk-3GJPDCPF.js";import{a as X}from"./chunk-77RKG7JI.js";import{$ as C,Aa as F,C as I,Cb as D,Da as R,Ea as x,Fb as $,Ga as V,Ha as j,Ja as B,Jb as G,Kb as W,L as a,Mb as N,Pb as q,Qb as z,Sa as L,U as A,Ub as H,Xb as Q,Y as M,Yb as J,_b as K,aa as b,ba as O,ca as E,d as y,da as p,ea as c,fa as s,ga as S,j as k,ka as g,la as w,ma as d,q as P,t as f,v as u,w as m,wa as _,xa as h,za as T}from"./chunk-RMQJIU2P.js";import"./chunk-ZO533RPQ.js";import"./chunk-CEKJCJ5E.js";import"./chunk-HF35MVHV.js";import"./chunk-65LW6U7E.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-H3Z6NBHK.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as v}from"./chunk-JHI3MBHO.js";var ee=(()=>{let i=class i{shuffleArray(n){let e=[...n],o=e.length;for(;o!=0;){let l=Math.floor(Math.random()*o);o--,[e[o],e[l]]=[e[l],e[o]]}return[...e]}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=P({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();var ie=["class","page"],re=()=>[.15,.5],oe=t=>({"german-translation":!0,shake:t}),se=t=>({"article-btn":!0,gelatin:t}),ae=t=>({next:!0,gelatin:t}),ce=(t,i)=>i+"-"+t;function le(t,i){t&1&&(c(0,"div",3)(1,"ion-label"),h(2,"Getting you a word..."),s(),S(3,"ion-spinner",5),s())}function de(t,i){if(t&1){let r=g();c(0,"ion-button",13),w("click",function(){let e=u(r),o=e.$implicit,l=e.$index,te=d(2);return m(te.answeredClicked(o,l))}),h(1),V(2,"titlecase"),s()}if(t&2){let r=i.$implicit,n=i.$index,e=d(2);_(x(6,se,e.chosenAnswer===n)),p("color",e.getButtonColor(n)),a(),T(" ",j(2,4,r)," ")}}function pe(t,i){if(t&1){let r=g();c(0,"ion-refresher",6),w("ionRefresh",function(){u(r);let e=d();return m(e.handleRefresh())}),S(1,"ion-refresher-content"),s(),c(2,"div",7)(3,"div",8)(4,"ion-text",9)(5,"div"),h(6),s()()(),c(7,"div",10)(8,"div",11),O(9,de,3,8,"ion-button",12,ce),s()()()}if(t&2){let r=d();a(4),p("color",r.getTextColor()),a(),_(x(5,oe,!r.isCorrect&&r.answered)),a(),F(" ",r.wordSets()[0].words[0].article?r.wordSets()[0].words[0].article+" ":"","",r.wordSets()[0].words[0].german_translation," "),a(3),E(r.wordSets()[0].answers)}}function he(t,i){if(t&1){let r=g();c(0,"ion-button",15),w("click",function(){u(r);let e=d(2);return m(e.answered?e.handleRefresh():e.checkAnswer())}),h(1),s()}if(t&2){let r=d(2);_(x(5,ae,r.answered)),p("disabled",!r.answered&&!r.chosen)("color",r.getTextColor()),a(),T(" ",r.answered?"Next":"Check"," ")}}function fe(t,i){if(t&1&&C(0,he,2,7,"ion-button",14),t&2){let r=d();b(r.chosen?0:-1)}}var ue=3,ke=(()=>{let i=class i{constructor(){this.gsApiService=f(Y),this.utilityService=f(ee),this.localStorageService=f(Z),this.wordSets=I([]),this.isCorrect=!1,this.answered=!1,this.chosen=!1,U({arrowForwardOutline:X}),B(()=>{this.wordSets().length<ue&&this.getWordsSet()})}getWordsSet(){this.gsApiService.getRandomWords().pipe(y(n=>{let e=this.utilityService.shuffleArray(n.map(l=>l.english_translation)),o=e.findIndex(l=>l.toLowerCase()===n[0]?.english_translation?.toLowerCase());return{words:n,answers:e,correctAnswer:o}}),k(1)).subscribe({next:n=>{this.wordSets.update(e=>(e.push(v({},n)),[...e]))},error:n=>{}})}resetQuestion(){this.chosen=!1,this.answered=!1,this.chosenAnswer=void 0,this.isCorrect=!1,this.wordSets.update(n=>n.splice(1))}answeredClicked(n,e){!this.wordSets()[0].words[0]||this.answered||(this.chosenAnswer=e,this.chosen=!0)}checkAnswer(){this.chosen&&(this.answered=!0,typeof this.chosenAnswer=="number"&&this.wordSets()[0].answers[this.chosenAnswer].toLowerCase()===this.wordSets()[0].words[0]?.english_translation?.toLowerCase()?this.handleAnswer(!0):this.handleAnswer(!1))}handleAnswer(n){n?this.localStorageService.addTranslationsPageSuccess():this.localStorageService.addTranslationsPageFailure(),this.isCorrect=n,this.answered=!0}getButtonColor(n){return!this.answered&&!this.chosen?"dark":this.chosen&&!this.answered&&n===this.chosenAnswer?"warning":n===this.wordSets()[0].correctAnswer&&this.answered&&this.chosen?"success":n===this.chosenAnswer?"danger":"dark"}getTextColor(){return this.answered?this.isCorrect?"success":"danger":"dark"}handleRefresh(){this.resetQuestion()}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=A({type:i,selectors:[["app-translations-tab",8,"page"]],attrs:ie,decls:10,vars:13,consts:[["modal",""],[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"spinner-container"],["trigger","open-modal",3,"isOpen","keyboardClose","backdropDismiss","handle","draggable","initialBreakpoint","breakpoints","backdropBreakpoint"],["name","lines-sharp"],["slot","fixed",3,"ionRefresh"],[1,"main-container"],[1,"word-container"],[3,"color"],[1,"question-container"],[1,"choices"],[3,"class","color"],[3,"click","color"],["shape","round",3,"disabled","class","color"],["shape","round",3,"click","disabled","color"]],template:function(e,o){e&1&&(c(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title"),h(3," Guess The Translation "),s()()(),c(4,"ion-content",2),C(5,le,4,0,"div",3)(6,pe,11,7),s(),c(7,"ion-modal",4,0),M(9,fe,1,1,"ng-template"),s()),e&2&&(p("translucent",!0),a(4),p("forceOverscroll",!1)("fullscreen",!0),a(),b(o.wordSets().length?6:5),a(2),p("isOpen",o.chosen)("keyboardClose",!1)("backdropDismiss",!1)("handle",!1)("draggable",!1)("initialBreakpoint",.15)("breakpoints",R(12,re))("backdropBreakpoint",.5))},dependencies:[G,W,J,K,N,H,q,z,Q,$,D,L],styles:[".article-card[_ngcontent-%COMP%]{display:inline-block;margin:0;box-shadow:1px 2px #888}ion-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;font-weight:700}.word-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;align-items:center;font-weight:700;font-size:xx-large;color:var(--ion-color-dark-shade);flex-direction:column}.article-btn[_ngcontent-%COMP%]{font-weight:700;--box-shadow: 3px 5px #888}.next[_ngcontent-%COMP%]{font-weight:700;margin:12px}.translation-btn[_ngcontent-%COMP%]{margin-bottom:22px;font-size:10px}.main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,1fr);height:100%;justify-content:center;position:relative}.next-button[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;width:100%;display:flex;align-items:center;justify-content:end}.choices[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;padding:8px;width:100%}.question-container[_ngcontent-%COMP%]{width:100%;align-items:end;display:flex;margin-bottom:10vh}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;height:100%;justify-content:center;gap:8px}"]});let t=i;return t})();export{ke as TranslationsTabPage};
