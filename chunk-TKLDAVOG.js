import{a as ae}from"./chunk-BCBJALFR.js";import{a as re}from"./chunk-O3DQFV77.js";import{a as ne,b as oe}from"./chunk-M3XUFGYY.js";import{a as J,b as ie}from"./chunk-NLC36UP4.js";import{$ as u,Aa as R,Ac as Y,Ba as L,Bc as Z,C as E,Fa as A,G as P,L as s,Qa as X,Rb as x,Sb as $,Tb as j,U as T,Ub as H,Vb as U,Wb as V,Xb as G,Yc as ee,aa as g,ca as k,da as O,ea as h,fa as c,fc as N,ga as l,ha as p,j as w,kc as Q,la as I,ma as W,mc as q,na as f,od as te,pc as B,ra as D,sa as M,t as d,ta as F,ub as z,v as b,w as y,ya as v,zc as K}from"./chunk-RTO6WDIM.js";import"./chunk-RZIBBJQ2.js";import"./chunk-QUJFQN2Y.js";import"./chunk-S66GZ3GW.js";import"./chunk-JJC7LCPG.js";import"./chunk-BWE55RDB.js";import"./chunk-VPLLFS7J.js";import"./chunk-DLFPG55H.js";import"./chunk-6HRV5MJL.js";import"./chunk-T77LZ5ZG.js";import"./chunk-BMJVVMK5.js";import"./chunk-QLURDETW.js";import"./chunk-KEHXJWBY.js";import"./chunk-OAAU2IJF.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-VRJJ5SCX.js";import"./chunk-CKP3SGE2.js";import"./chunk-POMS3W3A.js";import"./chunk-6YT5GN4E.js";import"./chunk-VDFYVGMU.js";import"./chunk-FS7NKJS5.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-SPMQWSIB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as C,b as S}from"./chunk-2R6CW7ES.js";var le=(t,n)=>n.id+"-"+t;function ce(t,n){t&1&&(c(0,"ion-card",3)(1,"ion-card-content")(2,"div",5)(3,"div",6),p(4,"ion-skeleton-text",7),l()()()()),t&2&&(s(4),h("animated",!0))}function de(t,n){t&1&&(c(0,"div",9),p(1,"ion-icon",13),l())}function he(t,n){t&1&&(c(0,"div",10),p(1,"ion-icon",14),l())}function me(t,n){if(t&1&&(c(0,"div",12),v(1),l()),t&2){let a=f().$implicit;s(),R(' "',a.english_translation,'" ')}}function pe(t,n){if(t&1&&(c(0,"ion-card",8),u(1,de,2,0,"div",9)(2,he,2,0,"div",10),c(3,"ion-card-content")(4,"div",11)(5,"div",6),v(6),l(),u(7,me,2,1,"div",12),l()()()),t&2){let a=n.$implicit,i=n.$index,e=f(2);h("id",a.id),s(),g(a.isSwipeRight?1:a.isSwipeLeft?2:-1),s(3),h("id",A(i===e.wordCards().length-1?"active-card":"")),s(2),L(" ",a.article?a.article+" ":"","",a.german_translation," "),s(),g(a.isUnknown?7:-1)}}function fe(t,n){if(t&1&&k(0,pe,8,7,"ion-card",8,le),t&2){let a=f();O(a.wordCards())}}function ue(t,n){if(t&1){let a=I();c(0,"ion-fab",4)(1,"ion-fab-button",15),p(2,"ion-icon",16),l(),c(3,"ion-fab-list",17)(4,"ion-fab-button",18),W("click",function(){b(a);let e=f();return y(e.shareWord())}),p(5,"ion-icon",19),l()()()}if(t&2){let a=f();h("edge",!0),s(),h("disabled",!a.wordCards().length),s(3),h("disabled",!a.wordCards().length)}}var De=(()=>{let n=class n{constructor(){this.platform=d(z),this.gsApiService=d(ae),this.cdr=d(X),this.sharingService=d(re),this.hapticsService=d(ie),this.gestureCtrl=d(ne),this.localStorageService=d(te),this.affirmationToastService=d(oe),this.wordCards=E([]),this.sharingEnabled=!1,J({checkmarkCircleOutline:K,closeCircleOutline:Z,chevronDownCircleOutline:Y,shareOutline:ee}),this.sharingEnabled=this.sharingService.isSharingEnabled}ionViewWillEnter(){this.sharingEnabled=this.sharingService.initializeSharing()}shareWord(){this.hapticsService.vibrateDefault(),this.sharingService.shareElement("active-card","Hey, take a look at this word!",this.wordCards()[this.wordCards().length-1].german_translation)}ngAfterViewInit(){this.gsApiService.getRandomWords().pipe(w(1)).subscribe({next:i=>{this.wordCards.set([]),i.forEach(e=>{this.wordCards.update(o=>[...o,{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural}])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())},error:i=>{}})}useSwipeGesture(i){i.forEach(e=>{let o=this.gestureCtrl.create({el:e.nativeElement,onStart:()=>{},onMove:r=>{e.nativeElement.style.transform=`translateX(${r.deltaX}px) rotate(${r.deltaX/10}deg)`,r.deltaX>80?this.setWordData(e.nativeElement.id,!0,!1):r.deltaX<-80?this.setWordData(e.nativeElement.id,!1,!0):this.setWordData(e.nativeElement.id,!1,!1)},onEnd:r=>{e.nativeElement.style.transition=".5s ease-out",this.setWordData(e.nativeElement.id,!1,!1),r.deltaX>80?(this.hapticsService.vibrateDefault(),e.nativeElement.style.transform=`translateX(${+this.platform.width()*2}px) rotate(${r.deltaX/2}deg)`,this.removeSuccessWordCard(e.nativeElement.id,o),this.documentSuccess(e.nativeElement.id),this.affirmationToastService.showPositiveToast()):r.deltaX<-80?(this.hapticsService.vibrateDefault(),e.nativeElement.style.transform="",this.documentFailure(e.nativeElement.id),this.setWordData(e.nativeElement.id,void 0,void 0,!0)):e.nativeElement.style.transform="",this.cdr.detectChanges()},gestureName:"swipe"});o.enable(!0)}),this.cdr.detectChanges()}removeSuccessWordCard(i,e){setTimeout(()=>{this.wordCards.update(o=>o.filter(r=>r.id+""!=i+"")),e.destroy(),this.checkForLowNumberOfWordsInArray()},600)}checkForLowNumberOfWordsInArray(){this.wordCards().length<3&&this.gsApiService.getRandomWords(this.wordCards().map(i=>+i.id)).pipe(w(1)).subscribe(i=>{i.forEach(e=>{this.wordCards.update(o=>[{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural},...o])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())})}setWordData(i,e,o,r){this.wordCards.update(se=>se.map(m=>m.id+""!=i+""?m:S(C({},m),{isSwipeRight:e??m.isSwipeRight,isSwipeLeft:o??m.isSwipeLeft,isUnknown:r??m.isUnknown})))}documentSuccess(i){this.wordCards().some(e=>e.id+""===i&&!e.isUnknown)&&this.localStorageService.addSwiperPageSuccess()}documentFailure(i){this.wordCards().some(e=>e.id+""===i&&!e.isUnknown)&&this.localStorageService.addSwiperPageFailure()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=T({type:n,selectors:[["app-swiper-tab"]],viewQuery:function(e,o){if(e&1&&D(x,5,P),e&2){let r;M(r=F())&&(o.cards=r)}},decls:9,vars:5,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"content-container"],[1,"word-card"],["slot","fixed","vertical","top","horizontal","end",3,"edge"],[1,"word-translation-container"],[1,"german-word-translation"],[3,"animated"],[1,"word-card",3,"id"],[1,"success-overlay"],[1,"failure-overlay"],[1,"word-translation-container",3,"id"],[1,"english-word-translation"],["name","checkmark-circle-outline",1,"success-icon"],["name","close-circle-outline",1,"success-icon"],["color","dark","size","small",3,"disabled"],["name","chevron-down-circle-outline"],["side","bottom"],[3,"click","disabled"],["name","share-outline"]],template:function(e,o){e&1&&(c(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),v(3,"Word Swipe"),l()()(),c(4,"ion-content",1)(5,"div",2),u(6,ce,5,1,"ion-card",3)(7,fe,2,0),l(),u(8,ue,6,3,"ion-fab",4),l()),e&2&&(h("translucent",!0),s(4),h("forceOverscroll",!1)("fullscreen",!0),s(2),g(o.wordCards().length?7:6),s(2),g(o.sharingEnabled?8:-1))},dependencies:[G,q,Q,j,x,$,B,N,H,U,V],styles:[".word-card[_ngcontent-%COMP%]{height:130vw;width:90vw;position:absolute;border-radius:10px;max-height:80vh}.content-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;justify-content:center}.german-word-translation[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-text-color)}.german-word-translation[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:150px;height:40px}.english-word-translation[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-text-color-step-400)}ion-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;text-align:center;justify-content:center;gap:16px}.word-translation-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.success-overlay[_ngcontent-%COMP%]{-webkit-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;box-shadow:0 0 100px 20px #008000b3 inset;position:absolute;height:100%;width:100%;display:flex;text-align:center;justify-items:center;justify-content:center}.failure-overlay[_ngcontent-%COMP%]{display:flex;text-align:center;justify-items:center;justify-content:center;position:absolute;height:100%;width:100%;-webkit-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;box-shadow:0 0 100px 20px #ff0000b3 inset}.success-icon[_ngcontent-%COMP%]{font-size:50px;margin-top:85%;opacity:.5}"]});let t=n;return t})();export{De as Tab1Page};
