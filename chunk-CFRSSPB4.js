import{a as Q}from"./chunk-33SRS5BR.js";import{a as L}from"./chunk-AZNADEWA.js";import{c as H}from"./chunk-EGKACPSF.js";import{$ as S,Aa as w,C as O,Ia as C,Ja as T,Kb as V,L as r,La as M,Ma as y,Nb as R,Oa as E,Rb as G,Sb as N,U as I,Xa as W,Y as D,aa as v,ac as U,ba as b,ca as u,d as P,da as h,ea as c,fa as s,fc as j,ga as a,ha as A,hc as $,j as F,la as m,ma as x,na as l,t as g,v as _,w as f,xa as k,ya as p}from"./chunk-4CSFUU4W.js";import"./chunk-XE773CCY.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as B}from"./chunk-JHI3MBHO.js";var K=["class","page"],X=()=>[.15,.5],q=()=>[],J=t=>({"choice-btn":!0,gelatin:t}),Y=(t,o)=>o.english_translation+"-left-"+t,Z=(t,o)=>o.german_translation+"-right-"+t;function ee(t,o){t&1&&A(0,"ion-skeleton-text",5),t&2&&c("animated",!0)}function te(t,o){t&1&&A(0,"ion-skeleton-text",5),t&2&&c("animated",!0)}function ie(t,o){t&1&&(s(0,"div",2)(1,"div",4),u(2,ee,1,1,"ion-skeleton-text",5,b),a(),s(4,"div",6),u(5,te,1,1,"ion-skeleton-text",5,b),a()()),t&2&&(r(2),h(C(0,q).constructor(5)),r(3),h(C(1,q).constructor(5)))}function ne(t,o){if(t&1){let n=m();s(0,"ion-button",8),x("click",function(){let i=_(n).$implicit,d=l(2);return f(d.answeredClicked(i,!0))}),p(1),M(2,"titlecase"),a()}if(t&2){let n=o.$implicit,e=l(2);k(T(7,J,e.gelatin(n,!0))),c("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!0)),r(),w(" ",y(2,5,n.english_translation)," ")}}function oe(t,o){if(t&1){let n=m();s(0,"ion-button",8),x("click",function(){let i=_(n).$implicit,d=l(2);return f(d.answeredClicked(i,!1))}),p(1),M(2,"titlecase"),a()}if(t&2){let n=o.$implicit,e=l(2);k(T(7,J,e.gelatin(n,!1))),c("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!1)),r(),w(" ",y(2,5,n.german_translation)," ")}}function re(t,o){if(t&1&&(s(0,"div",2)(1,"div",4),u(2,ne,3,9,"ion-button",7,Y),a(),s(4,"div",6),u(5,oe,3,9,"ion-button",7,Z),a()()),t&2){let n=l();r(2),h(n.wordSets()[0].left),r(3),h(n.wordSets()[0].right)}}function se(t,o){if(t&1){let n=m();s(0,"ion-button",10),x("click",function(){_(n);let i=l(2);return f(i.wrongAnswer?i.handleMistakeDismiss():i.handleRefresh())}),p(1),a()}if(t&2){let n=l(2);c("color",n.getTextColor()),r(),w(" ",n.wrongAnswer?"Oops..!":"Next"," ")}}function ae(t,o){if(t&1&&S(0,se,2,2,"ion-button",9),t&2){let n=l();v(n.isGameDone()||n.wrongAnswer?0:-1)}}var ce=3,z=5,Ce=(()=>{let o=class o{constructor(){this.gsApiService=g(L),this.utilityService=g(Q),this.localStorageService=g(H),this.wordSets=O([]),this.foundWords=[],E(()=>{this.wordSets().length<ce&&this.getWordsSet()})}getTextColor(){return this.wrongAnswer?"danger":this.isGameDone()?"success":"dark"}handleRefresh(){this.resetQuestion()}handleMistakeDismiss(){this.wrongAnswer=void 0,this.chosenAnswer=void 0}resetQuestion(){this.chosenAnswer=void 0,this.wrongAnswer=void 0,this.foundWords=[],this.wordSets.update(e=>e.splice(1))}answeredClicked(e,i){if(this.wordSets()[0]){if(e.id===this.chosenAnswer?.word?.id&&i===this.chosenAnswer?.left&&!this.isButtonFound(e)){this.chosenAnswer=void 0;return}this.chosenAnswer?i===this.chosenAnswer?.left?this.chosenAnswer={word:e,left:i}:i!==this.chosenAnswer?.left&&(this.chosenAnswer?.word?.id===e?.id?(this.foundWords.push(e),this.wrongAnswer=void 0,this.chosenAnswer=void 0,this.handleStatisticsUpdateAnswerStatus(!0)):(this.wrongAnswer=e,this.handleStatisticsUpdateAnswerStatus(!1))):this.chosenAnswer={word:e,left:i}}}handleStatisticsUpdateAnswerStatus(e){e?this.localStorageService.addMatchPageSuccess():this.localStorageService.addMatchPageFailure()}isGameDone(){return this.foundWords.length===z}isButtonFound(e){return this.foundWords.some(i=>i.id===e.id)}isButtonMistake(e){return this.wrongAnswer?.id===e.id}gelatin(e,i){return this.isButtonMistake(e)&&i!==this.chosenAnswer?.left||this.isButtonActiveChoice(e,i)||this.isButtonFound(e)}isButtonActiveChoice(e,i){return e.id===this.chosenAnswer?.word?.id&&i===this.chosenAnswer?.left&&!this.isButtonFound(e)}getButtonColor(e,i){if(this.wordSets()[0])return this.isButtonMistake(e)&&i!==this.chosenAnswer?.left?"danger":this.isButtonActiveChoice(e,i)?this.wrongAnswer?"danger":"warning":this.isButtonFound(e)?"success":"dark"}getWordsSet(){this.gsApiService.getRandomWords([],z).pipe(P(e=>({left:this.utilityService.shuffleArray(e),right:this.utilityService.shuffleArray(e)})),F(1)).subscribe({next:e=>{this.wordSets.update(i=>(i.push(B({},e)),[...i]))},error:e=>{}})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=I({type:o,selectors:[["app-matching-tab",8,"page"]],attrs:K,decls:9,vars:12,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"main-container"],[3,"isOpen","keyboardClose","backdropDismiss","handle","draggable","initialBreakpoint","breakpoints"],[1,"left"],[3,"animated"],[1,"right"],["fill","outline",3,"class","disabled","color"],["fill","outline",3,"click","disabled","color"],["shape","round",1,"next",3,"color"],["shape","round",1,"next",3,"click","color"]],template:function(i,d){i&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),p(3," Word Match "),a()()(),s(4,"ion-content",1),S(5,ie,7,2,"div",2)(6,re,7,0,"div",2),a(),s(7,"ion-modal",3),D(8,ae,1,1,"ng-template"),a()),i&2&&(c("translucent",!0),r(4),c("forceOverscroll",!1)("fullscreen",!0),r(),v(d.wordSets().length?6:5),r(2),c("isOpen",d.isGameDone()||!!d.wrongAnswer)("keyboardClose",!1)("backdropDismiss",!1)("handle",!1)("draggable",!1)("initialBreakpoint",.15)("breakpoints",C(11,X)))},dependencies:[R,G,N,j,$,V,U,W],styles:[".main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);height:100%;justify-content:center;position:relative}.main-container[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:50px}.no-ripple[_ngcontent-%COMP%]{--ripple-color: transparent}.next[_ngcontent-%COMP%]{font-weight:700;margin:12px}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1rem;padding:.5rem}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;height:100%;justify-content:center;gap:8px}"]});let t=o;return t})();export{Ce as MatchingTabPage};
