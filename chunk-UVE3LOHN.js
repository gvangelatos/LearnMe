import{a as oe}from"./chunk-ZKAHJ4OB.js";import{a as re}from"./chunk-4W4ZVEU4.js";import{a as ae}from"./chunk-JYXH4C46.js";import{Ab as V,B as E,Bb as G,Bc as ne,Da as A,E as P,J as s,Mb as N,Oa as U,Rb as Q,S as T,Tb as q,Wb as B,Z as u,_ as g,aa as k,ba as O,ca as h,cc as J,da as c,ea as l,ec as K,fa as p,fc as Y,hc as Z,ic as ee,j as _,ja as I,jc as te,ka as W,la as f,lb as X,pa as D,qa as M,ra as F,s as d,tc as ie,u as b,v as y,vb as C,wa as v,wb as z,xb as $,ya as R,yb as j,za as L,zb as H}from"./chunk-P45QBID6.js";import"./chunk-THTHWAQ6.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4DJMDNC5.js";import"./chunk-FKJDL3M2.js";import"./chunk-YIHCPKBH.js";import"./chunk-VPLLFS7J.js";import"./chunk-KPN2SSRA.js";import"./chunk-C64N4FA3.js";import"./chunk-SMEE54TN.js";import"./chunk-BMJVVMK5.js";import"./chunk-R2VG4DQ6.js";import"./chunk-ZID3IQXP.js";import"./chunk-KI7QKDP2.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-Z4W4WSBC.js";import"./chunk-CKP3SGE2.js";import"./chunk-FPZUIWVF.js";import"./chunk-6YT5GN4E.js";import"./chunk-VDFYVGMU.js";import"./chunk-FS7NKJS5.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-SPMQWSIB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as x,b as S}from"./chunk-2R6CW7ES.js";var le=(t,a)=>a.id+"-"+t;function ce(t,a){t&1&&(c(0,"ion-card",3)(1,"ion-card-content")(2,"div",5)(3,"div",6),p(4,"ion-skeleton-text",7),l()()()()),t&2&&(s(4),h("animated",!0))}function de(t,a){t&1&&(c(0,"div",9),p(1,"ion-icon",13),l())}function he(t,a){t&1&&(c(0,"div",10),p(1,"ion-icon",14),l())}function me(t,a){if(t&1&&(c(0,"div",12),v(1),l()),t&2){let o=f().$implicit;s(),R(' "',o.english_translation,'" ')}}function pe(t,a){if(t&1&&(c(0,"ion-card",8),u(1,de,2,0,"div",9)(2,he,2,0,"div",10),c(3,"ion-card-content")(4,"div",11)(5,"div",6),v(6),l(),u(7,me,2,1,"div",12),l()()()),t&2){let o=a.$implicit,i=a.$index,e=f(2);h("id",o.id),s(),g(o.isSwipeRight?1:o.isSwipeLeft?2:-1),s(3),h("id",A(i===e.wordCards().length-1?"active-card":"")),s(2),L(" ",o.article?o.article+" ":"","",o.german_translation," "),s(),g(o.isUnknown?7:-1)}}function fe(t,a){if(t&1&&k(0,pe,8,7,"ion-card",8,le),t&2){let o=f();O(o.wordCards())}}function ue(t,a){if(t&1){let o=I();c(0,"ion-fab",4)(1,"ion-fab-button",15),p(2,"ion-icon",16),l(),c(3,"ion-fab-list",17)(4,"ion-fab-button",18),W("click",function(){b(o);let e=f();return y(e.shareWord())}),p(5,"ion-icon",19),l()()()}if(t&2){let o=f();h("edge",!0),s(),h("disabled",!o.wordCards().length),s(3),h("disabled",!o.wordCards().length)}}var De=(()=>{let a=class a{constructor(){this.platform=d(X),this.gsApiService=d(oe),this.cdr=d(U),this.sharingService=d(re),this.hapticsService=d(ae),this.gestureCtrl=d(K),this.localStorageService=d(J),this.affirmationToastService=d(ne),this.wordCards=E([]),this.sharingEnabled=!1,Y({checkmarkCircleOutline:Z,closeCircleOutline:te,chevronDownCircleOutline:ee,shareOutline:ie}),this.sharingEnabled=this.sharingService.isSharingEnabled}ionViewWillEnter(){this.sharingEnabled=this.sharingService.initializeSharing()}shareWord(){this.hapticsService.vibrateDefault(),this.sharingService.shareElement("active-card","Hey, take a look at this word!",this.wordCards()[this.wordCards().length-1].german_translation)}ngAfterViewInit(){this.gsApiService.getRandomWords().pipe(_(1)).subscribe({next:i=>{this.wordCards.set([]),i.forEach(e=>{this.wordCards.update(n=>[...n,{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural}])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())},error:i=>{}})}useSwipeGesture(i){i.forEach(e=>{let n=this.gestureCtrl.create({el:e.nativeElement,onStart:()=>{},onMove:r=>{e.nativeElement.style.transform=`translateX(${r.deltaX}px) rotate(${r.deltaX/10}deg)`,r.deltaX>80?this.setWordData(e.nativeElement.id,!0,!1):r.deltaX<-80?this.setWordData(e.nativeElement.id,!1,!0):this.setWordData(e.nativeElement.id,!1,!1)},onEnd:r=>{e.nativeElement.style.transition=".5s ease-out",this.setWordData(e.nativeElement.id,!1,!1),r.deltaX>80?(this.hapticsService.vibrateDefault(),e.nativeElement.style.transform=`translateX(${+this.platform.width()*2}px) rotate(${r.deltaX/2}deg)`,this.wordCards()[this.wordCards().length-1].isUnknown||this.affirmationToastService.showPositiveToast(),this.removeSuccessWordCard(e.nativeElement.id,n),this.documentSuccess(e.nativeElement.id)):r.deltaX<-80?(this.hapticsService.vibrateDefault(),e.nativeElement.style.transform="",this.documentFailure(e.nativeElement.id),this.setWordData(e.nativeElement.id,void 0,void 0,!0)):e.nativeElement.style.transform="",this.cdr.detectChanges()},gestureName:"swipe"});n.enable(!0)}),this.cdr.detectChanges()}removeSuccessWordCard(i,e){setTimeout(()=>{this.wordCards.update(n=>n.filter(r=>r.id+""!=i+"")),e.destroy(),this.checkForLowNumberOfWordsInArray()},600)}checkForLowNumberOfWordsInArray(){this.wordCards().length<3&&this.gsApiService.getRandomWords(this.wordCards().map(i=>+i.id)).pipe(_(1)).subscribe(i=>{i.forEach(e=>{this.wordCards.update(n=>[{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural},...n])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())})}setWordData(i,e,n,r){this.wordCards.update(se=>se.map(m=>m.id+""!=i+""?m:S(x({},m),{isSwipeRight:e??m.isSwipeRight,isSwipeLeft:n??m.isSwipeLeft,isUnknown:r??m.isUnknown})))}documentSuccess(i){this.wordCards().some(e=>e.id+""===i&&!e.isUnknown)&&this.localStorageService.addSwiperPageSuccess()}documentFailure(i){if(this.wordCards().some(e=>e.id+""===i&&!e.isUnknown)){let e=this.wordCards().find(n=>n.id+""===i&&!n.isUnknown);this.localStorageService.addSwiperPageFailure(e)}}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=T({type:a,selectors:[["app-swiper-tab"]],viewQuery:function(e,n){if(e&1&&D(C,5,P),e&2){let r;M(r=F())&&(n.cards=r)}},decls:9,vars:5,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"content-container"],[1,"word-card"],["slot","fixed","vertical","top","horizontal","end",3,"edge"],[1,"word-translation-container"],[1,"german-word-translation"],[3,"animated"],[1,"word-card",3,"id"],[1,"success-overlay"],[1,"failure-overlay"],[1,"word-translation-container",3,"id"],[1,"english-word-translation"],["name","checkmark-circle-outline",1,"success-icon"],["name","close-circle-outline",1,"success-icon"],["color","dark","size","small",3,"disabled"],["name","chevron-down-circle-outline"],["side","bottom"],[3,"click","disabled"],["name","share-outline"]],template:function(e,n){e&1&&(c(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),v(3,"Word Swipe"),l()()(),c(4,"ion-content",1)(5,"div",2),u(6,ce,5,1,"ion-card",3)(7,fe,2,0),l(),u(8,ue,6,3,"ion-fab",4),l()),e&2&&(h("translucent",!0),s(4),h("forceOverscroll",!1)("fullscreen",!0),s(2),g(n.wordCards().length?7:6),s(2),g(n.sharingEnabled?8:-1))},dependencies:[G,q,Q,$,C,z,B,N,j,H,V],styles:[".word-card[_ngcontent-%COMP%]{height:130vw;width:90vw;position:absolute;border-radius:10px;max-height:80vh}.content-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;justify-content:center}.german-word-translation[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-text-color)}.german-word-translation[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:150px;height:40px}.english-word-translation[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-text-color-step-400)}ion-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;text-align:center;justify-content:center;gap:16px}.word-translation-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.success-overlay[_ngcontent-%COMP%]{-webkit-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;box-shadow:0 0 100px 20px #008000b3 inset;position:absolute;height:100%;width:100%;display:flex;text-align:center;justify-items:center;justify-content:center}.failure-overlay[_ngcontent-%COMP%]{display:flex;text-align:center;justify-items:center;justify-content:center;position:absolute;height:100%;width:100%;-webkit-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;box-shadow:0 0 100px 20px #ff0000b3 inset}.success-icon[_ngcontent-%COMP%]{font-size:50px;margin-top:85%;opacity:.5}"]});let t=a;return t})();export{De as Tab1Page};
