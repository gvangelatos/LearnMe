import{a as z}from"./chunk-QCX3PXTB.js";import{a as q}from"./chunk-ZKAHJ4OB.js";import{a as K}from"./chunk-JYXH4C46.js";import{$ as b,B as E,Bb as R,Bc as Q,Ga as x,Ha as M,J as o,Ja as P,Ka as k,Ma as W,Mb as U,Rb as $,S as I,Tb as H,Ua as V,W as O,Z as v,_ as C,aa as u,ac as y,ba as p,ca as l,cc as L,d as F,da as s,ea as a,fa as T,j as D,ja as _,ka as S,la as c,qb as G,s as d,tb as j,u as m,v as f,va as A,wa as g,xb as N,ya as w}from"./chunk-P45QBID6.js";import"./chunk-THTHWAQ6.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4DJMDNC5.js";import"./chunk-FKJDL3M2.js";import"./chunk-YIHCPKBH.js";import"./chunk-VPLLFS7J.js";import"./chunk-KPN2SSRA.js";import"./chunk-C64N4FA3.js";import"./chunk-SMEE54TN.js";import"./chunk-BMJVVMK5.js";import"./chunk-R2VG4DQ6.js";import"./chunk-ZID3IQXP.js";import"./chunk-KI7QKDP2.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-Z4W4WSBC.js";import"./chunk-CKP3SGE2.js";import"./chunk-FPZUIWVF.js";import"./chunk-6YT5GN4E.js";import"./chunk-VDFYVGMU.js";import"./chunk-FS7NKJS5.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-SPMQWSIB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as B}from"./chunk-2R6CW7ES.js";var Y=["class","page"],Z=()=>[.15,.5],J=()=>[],X=i=>({"choice-btn":!0,gelatin:i}),ee=(i,r)=>r.english_translation+"-left-"+i,te=(i,r)=>r.german_translation+"-right-"+i;function ie(i,r){i&1&&T(0,"ion-skeleton-text",5),i&2&&l("animated",!0)}function ne(i,r){i&1&&T(0,"ion-skeleton-text",5),i&2&&l("animated",!0)}function re(i,r){if(i&1&&(s(0,"div",2)(1,"div",4),u(2,ie,1,1,"ion-skeleton-text",5,b),a(),s(4,"div",6),u(5,ne,1,1,"ion-skeleton-text",5,b),a()()),i&2){let n=c();o(2),p(x(0,J).constructor(n.matchingPairs)),o(3),p(x(1,J).constructor(n.matchingPairs))}}function oe(i,r){if(i&1){let n=_();s(0,"ion-button",8),S("click",function(){let t=m(n).$implicit,h=c(2);return f(h.answeredClicked(t,!0))}),g(1),P(2,"titlecase"),a()}if(i&2){let n=r.$implicit,e=c(2);A(M(7,X,e.gelatin(n,!0))),l("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!0)),o(),w(" ",k(2,5,n.english_translation)," ")}}function se(i,r){if(i&1){let n=_();s(0,"ion-button",8),S("click",function(){let t=m(n).$implicit,h=c(2);return f(h.answeredClicked(t,!1))}),g(1),P(2,"titlecase"),a()}if(i&2){let n=r.$implicit,e=c(2);A(M(7,X,e.gelatin(n,!1))),l("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!1)),o(),w(" ",k(2,5,n.german_translation)," ")}}function ae(i,r){if(i&1&&(s(0,"div",2)(1,"div",4),u(2,oe,3,9,"ion-button",7,ee),a(),s(4,"div",6),u(5,se,3,9,"ion-button",7,te),a()()),i&2){let n=c();o(2),p(n.wordSets()[0].left),o(3),p(n.wordSets()[0].right)}}function ce(i,r){if(i&1){let n=_();s(0,"ion-button",10),S("click",function(){m(n);let t=c(2);return f(t.wrongAnswer?t.handleMistakeDismiss():t.handleRefresh(!0))}),g(1),a()}if(i&2){let n=c(2);l("color",n.getTextColor()),o(),w(" ",n.wrongAnswer?"Oops..!":"Next"," ")}}function le(i,r){if(i&1&&v(0,ce,2,2,"ion-button",9),i&2){let n=c();C(n.isGameDone()||n.wrongAnswer?0:-1)}}var he=3,be=(()=>{let r=class r{constructor(){this.gsApiService=d(q),this.utilityService=d(z),this.hapticsService=d(K),this.localStorageService=d(L),this.affirmationToastService=d(Q),this.wordSets=E([]),this.foundWords=[],this.matchingPairs=5,this.getMatchingPairsStorageData(),W(()=>{this.wordSets().length<he&&this.getWordsSet()})}ionViewWillEnter(){this.getMatchingPairsStorageData(!0)}getMatchingPairsStorageData(e=!1){let t=this.localStorageService.getItem(y.MatchPairs);t===null?(this.matchingPairs=5,this.localStorageService.setItem(y.MatchPairs,this.matchingPairs)):(e&&this.matchingPairs!==t&&this.wordSets.set([]),this.matchingPairs=t)}getTextColor(){return this.wrongAnswer?"danger":this.isGameDone()?"success":"dark"}handleRefresh(e=!1){e&&(this.hapticsService.vibrateSuccess(),this.affirmationToastService.showPositiveToast()),this.resetQuestion()}handleMistakeDismiss(){this.wrongAnswer=void 0,this.chosenAnswer=void 0}resetQuestion(){this.chosenAnswer=void 0,this.wrongAnswer=void 0,this.foundWords=[],this.wordSets.update(e=>e.splice(1))}answeredClicked(e,t){if(this.wordSets()[0]){if(e.id===this.chosenAnswer?.word?.id&&t===this.chosenAnswer?.left&&!this.isButtonFound(e)){this.chosenAnswer=void 0;return}this.chosenAnswer?t===this.chosenAnswer?.left?this.chosenAnswer={word:e,left:t}:t!==this.chosenAnswer?.left&&(this.chosenAnswer?.word?.id===e?.id?(this.foundWords.push(e),this.wrongAnswer=void 0,this.chosenAnswer=void 0,this.handleStatisticsUpdateAnswerStatus(!0)):(this.wrongAnswer=e,this.handleStatisticsUpdateAnswerStatus(!1),this.hapticsService.vibrateError(),this.affirmationToastService.showNegativeToast())):this.chosenAnswer={word:e,left:t}}}handleStatisticsUpdateAnswerStatus(e){e?this.localStorageService.addMatchPageSuccess():this.localStorageService.addMatchPageFailure(this.wrongAnswer)}isGameDone(){return this.foundWords.length===this.matchingPairs}isButtonFound(e){return this.foundWords.some(t=>t.id===e.id)}isButtonMistake(e){return this.wrongAnswer?.id===e.id}gelatin(e,t){return this.isButtonMistake(e)&&t!==this.chosenAnswer?.left||this.isButtonActiveChoice(e,t)||this.isButtonFound(e)}isButtonActiveChoice(e,t){return e.id===this.chosenAnswer?.word?.id&&t===this.chosenAnswer?.left&&!this.isButtonFound(e)}getButtonColor(e,t){if(this.wordSets()[0])return this.isButtonMistake(e)&&t!==this.chosenAnswer?.left?"danger":this.isButtonActiveChoice(e,t)?this.wrongAnswer?"danger":"warning":this.isButtonFound(e)?"success":"dark"}getWordsSet(){this.gsApiService.getRandomWords([],this.matchingPairs).pipe(F(e=>({left:this.utilityService.shuffleArray(e),right:this.utilityService.shuffleArray(e)})),D(1)).subscribe({next:e=>{this.wordSets.update(t=>(t.push(B({},e)),[...t]))},error:e=>{}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=I({type:r,selectors:[["app-matching-tab",8,"page"]],attrs:Y,decls:9,vars:12,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"main-container"],[3,"isOpen","keyboardClose","backdropDismiss","handle","draggable","initialBreakpoint","breakpoints"],[1,"left"],[3,"animated"],[1,"right"],["fill","outline",3,"class","disabled","color"],["fill","outline",3,"click","disabled","color"],["shape","round",1,"next",3,"color"],["shape","round",1,"next",3,"click","color"]],template:function(t,h){t&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),g(3," Word Match "),a()()(),s(4,"ion-content",1),v(5,re,7,2,"div",2)(6,ae,7,0,"div",2),a(),s(7,"ion-modal",3),O(8,le,1,1,"ng-template"),a()),t&2&&(l("translucent",!0),o(4),l("forceOverscroll",!1)("fullscreen",!0),o(),C(h.wordSets().length?6:5),o(2),l("isOpen",h.isGameDone()||!!h.wrongAnswer)("keyboardClose",!1)("backdropDismiss",!1)("handle",!1)("draggable",!1)("initialBreakpoint",.15)("breakpoints",x(11,Z)))},dependencies:[j,N,R,$,H,G,U,V],styles:[".main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);height:100%;justify-content:center;position:relative}.main-container[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:50px}.no-ripple[_ngcontent-%COMP%]{--ripple-color: transparent}.next[_ngcontent-%COMP%]{font-weight:700;margin:12px}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1rem;padding:.5rem}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;height:100%;justify-content:center;gap:8px}"]});let i=r;return i})();export{be as MatchingTabPage};
