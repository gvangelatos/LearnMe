import{b as N}from"./chunk-SSXO4UB3.js";import{a as z}from"./chunk-3GJPDCPF.js";import{b as G,c as H}from"./chunk-FLOFNB6L.js";import{a as Q}from"./chunk-AZNADEWA.js";import{c as V}from"./chunk-EGKACPSF.js";import"./chunk-BFU7CVPT.js";import"./chunk-QUJFQN2Y.js";import"./chunk-BDDVY7BC.js";import"./chunk-6V4WPGQW.js";import"./chunk-DNEKNMT2.js";import"./chunk-D2SLIFQS.js";import"./chunk-2EALETWC.js";import"./chunk-2LL6VPXJ.js";import"./chunk-7FY2OE2O.js";import"./chunk-LULO4UGN.js";import"./chunk-LFE7Q6OZ.js";import"./chunk-4CWAT2GN.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BI2UBLOO.js";import"./chunk-CKP3SGE2.js";import"./chunk-SLI65CWH.js";import{$ as f,Aa as M,Ba as W,C as y,G as b,L as c,Pb as _,Qa as D,Qb as F,Rb as L,Sb as A,U as E,aa as u,ac as X,ca as P,da as T,ea as p,fa as s,fc as j,ga as l,ha as h,hc as U,j as x,kc as $,na as w,ra as k,sa as O,t as m,ta as I,ub as R,ya as g}from"./chunk-4CSFUU4W.js";import"./chunk-XE773CCY.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as C,b as S}from"./chunk-JHI3MBHO.js";var B=(t,n)=>n.id+"-"+t;function J(t,n){t&1&&(s(0,"ion-card",3)(1,"ion-card-content")(2,"div",4)(3,"div",5),h(4,"ion-skeleton-text",6),l()()()()),t&2&&(c(4),p("animated",!0))}function K(t,n){t&1&&(s(0,"div",8),h(1,"ion-icon",11),l())}function Y(t,n){t&1&&(s(0,"div",9),h(1,"ion-icon",12),l())}function Z(t,n){if(t&1&&(s(0,"div",10),g(1),l()),t&2){let r=w().$implicit;c(),M(' "',r.english_translation,'" ')}}function ee(t,n){if(t&1&&(s(0,"ion-card",7),f(1,K,2,0,"div",8)(2,Y,2,0,"div",9),s(3,"ion-card-content")(4,"div",4)(5,"div",5),g(6),l(),f(7,Z,2,1,"div",10),l()()()),t&2){let r=n.$implicit;p("id",r.id),c(),u(r.isSwipeRight?1:r.isSwipeLeft?2:-1),c(5),W(" ",r.article?r.article+" ":"","",r.german_translation," "),c(),u(r.isUnknown?7:-1)}}function te(t,n){if(t&1&&P(0,ee,8,5,"ion-card",7,B),t&2){let r=w();T(r.wordCards())}}var he=(()=>{let n=class n{constructor(){this.platform=m(R),this.gsApiService=m(Q),this.cdr=m(D),this.gestureCtrl=m(N),this.localStorageService=m(V),this.wordCards=y([]),z({checkmarkCircleOutline:G,closeCircleOutline:H})}ngAfterViewInit(){this.gsApiService.getRandomWords().pipe(x(1)).subscribe({next:i=>{this.wordCards.set([]),i.forEach(e=>{this.wordCards.update(a=>[...a,{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural}])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())},error:i=>{}})}useSwipeGesture(i){i.forEach(e=>{let a=this.gestureCtrl.create({el:e.nativeElement,onStart:()=>{},onMove:o=>{e.nativeElement.style.transform=`translateX(${o.deltaX}px) rotate(${o.deltaX/10}deg)`,o.deltaX>80?this.setWordData(e.nativeElement.id,!0,!1):o.deltaX<-80?this.setWordData(e.nativeElement.id,!1,!0):this.setWordData(e.nativeElement.id,!1,!1)},onEnd:o=>{e.nativeElement.style.transition=".5s ease-out",this.setWordData(e.nativeElement.id,!1,!1),o.deltaX>80?(e.nativeElement.style.transform=`translateX(${+this.platform.width()*2}px) rotate(${o.deltaX/2}deg)`,this.removeSuccessWordCard(e.nativeElement.id,a),this.documentSuccess(e.nativeElement.id)):o.deltaX<-80?(e.nativeElement.style.transform="",this.documentFailure(e.nativeElement.id),this.setWordData(e.nativeElement.id,void 0,void 0,!0)):e.nativeElement.style.transform="",this.cdr.detectChanges()},gestureName:"swipe"});a.enable(!0)}),this.cdr.detectChanges()}removeSuccessWordCard(i,e){setTimeout(()=>{this.wordCards.update(a=>a.filter(o=>o.id+""!=i+"")),e.destroy(),this.checkForLowNumberOfWordsInArray()},600)}checkForLowNumberOfWordsInArray(){this.wordCards().length<3&&this.gsApiService.getRandomWords(this.wordCards().map(i=>+i.id)).pipe(x(1)).subscribe(i=>{i.forEach(e=>{this.wordCards.update(a=>[{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural},...a])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())})}setWordData(i,e,a,o){this.wordCards.update(q=>q.map(d=>d.id+""!=i+""?d:S(C({},d),{isSwipeRight:e??d.isSwipeRight,isSwipeLeft:a??d.isSwipeLeft,isUnknown:o??d.isUnknown})))}documentSuccess(i){this.wordCards().some(e=>e.id+""===i&&!e.isUnknown)&&this.localStorageService.addSwiperPageSuccess()}documentFailure(i){this.wordCards().some(e=>e.id+""===i&&!e.isUnknown)&&this.localStorageService.addSwiperPageFailure()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=E({type:n,selectors:[["app-swiper-tab"]],viewQuery:function(e,a){if(e&1&&k(_,5,b),e&2){let o;O(o=I())&&(a.cards=o)}},decls:8,vars:4,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"content-container"],[1,"word-card"],[1,"word-translation-container"],[1,"german-word-translation"],[3,"animated"],[1,"word-card",3,"id"],[1,"success-overlay"],[1,"failure-overlay"],[1,"english-word-translation"],["name","checkmark-circle-outline",1,"success-icon"],["name","close-circle-outline",1,"success-icon"]],template:function(e,a){e&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),g(3,"Word Swipe"),l()()(),s(4,"ion-content",1)(5,"div",2),f(6,J,5,1,"ion-card",3)(7,te,2,0),l()()),e&2&&(p("translucent",!0),c(4),p("forceOverscroll",!1)("fullscreen",!0),c(2),u(a.wordCards().length?7:6))},dependencies:[A,U,j,L,_,F,$,X],styles:[".word-card[_ngcontent-%COMP%]{height:130vw;width:90vw;position:absolute;border-radius:10px;max-height:80vh}.content-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;justify-content:center}.german-word-translation[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-text-color)}.german-word-translation[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:150px;height:40px}.english-word-translation[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-text-color-step-400)}ion-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;text-align:center;justify-content:center;gap:16px}.word-translation-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.success-overlay[_ngcontent-%COMP%]{-webkit-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;box-shadow:0 0 100px 20px #008000b3 inset;position:absolute;height:100%;width:100%;display:flex;text-align:center;justify-items:center;justify-content:center}.failure-overlay[_ngcontent-%COMP%]{display:flex;text-align:center;justify-items:center;justify-content:center;position:absolute;height:100%;width:100%;-webkit-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;box-shadow:0 0 100px 20px #ff0000b3 inset}.success-icon[_ngcontent-%COMP%]{font-size:50px;margin-top:85%;opacity:.5}"]});let t=n;return t})();export{he as Tab1Page};
