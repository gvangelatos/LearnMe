import{a as K}from"./chunk-IGEUGUN4.js";import{a as H}from"./chunk-NLPZ5JLD.js";import{a as y,c as Q}from"./chunk-VPXB5BIU.js";import{$ as C,Aa as w,C as O,Ia as S,Ja as k,L as o,La as P,Lb as R,Ma as T,Oa as W,Ob as G,Sb as N,Tb as U,U as E,Xa as V,Y as I,aa as v,ba as b,bc as j,ca as h,d as F,da as u,ea as l,fa as s,ga as a,gc as $,ha as M,ic as L,j as D,la as f,ma as x,na as c,t as p,v as m,w as _,xa as A,ya as g}from"./chunk-73MXZ2UD.js";import"./chunk-XFTDMII6.js";import"./chunk-TWXWFH2W.js";import"./chunk-XSYUFH4D.js";import"./chunk-252GNU6G.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-SPMQWSIB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as B}from"./chunk-JHI3MBHO.js";var J=["class","page"],X=()=>[.15,.5],q=()=>[],z=i=>({"choice-btn":!0,gelatin:i}),Y=(i,r)=>r.english_translation+"-left-"+i,Z=(i,r)=>r.german_translation+"-right-"+i;function ee(i,r){i&1&&M(0,"ion-skeleton-text",5),i&2&&l("animated",!0)}function te(i,r){i&1&&M(0,"ion-skeleton-text",5),i&2&&l("animated",!0)}function ie(i,r){if(i&1&&(s(0,"div",2)(1,"div",4),h(2,ee,1,1,"ion-skeleton-text",5,b),a(),s(4,"div",6),h(5,te,1,1,"ion-skeleton-text",5,b),a()()),i&2){let n=c();o(2),u(S(0,q).constructor(n.matchingPairs)),o(3),u(S(1,q).constructor(n.matchingPairs))}}function ne(i,r){if(i&1){let n=f();s(0,"ion-button",8),x("click",function(){let t=m(n).$implicit,d=c(2);return _(d.answeredClicked(t,!0))}),g(1),P(2,"titlecase"),a()}if(i&2){let n=r.$implicit,e=c(2);A(k(7,z,e.gelatin(n,!0))),l("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!0)),o(),w(" ",T(2,5,n.english_translation)," ")}}function re(i,r){if(i&1){let n=f();s(0,"ion-button",8),x("click",function(){let t=m(n).$implicit,d=c(2);return _(d.answeredClicked(t,!1))}),g(1),P(2,"titlecase"),a()}if(i&2){let n=r.$implicit,e=c(2);A(k(7,z,e.gelatin(n,!1))),l("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!1)),o(),w(" ",T(2,5,n.german_translation)," ")}}function oe(i,r){if(i&1&&(s(0,"div",2)(1,"div",4),h(2,ne,3,9,"ion-button",7,Y),a(),s(4,"div",6),h(5,re,3,9,"ion-button",7,Z),a()()),i&2){let n=c();o(2),u(n.wordSets()[0].left),o(3),u(n.wordSets()[0].right)}}function se(i,r){if(i&1){let n=f();s(0,"ion-button",10),x("click",function(){m(n);let t=c(2);return _(t.wrongAnswer?t.handleMistakeDismiss():t.handleRefresh())}),g(1),a()}if(i&2){let n=c(2);l("color",n.getTextColor()),o(),w(" ",n.wrongAnswer?"Oops..!":"Next"," ")}}function ae(i,r){if(i&1&&C(0,se,2,2,"ion-button",9),i&2){let n=c();v(n.isGameDone()||n.wrongAnswer?0:-1)}}var ce=3,le=5,Se=(()=>{let r=class r{constructor(){this.gsApiService=p(H),this.utilityService=p(K),this.localStorageService=p(Q),this.wordSets=O([]),this.foundWords=[],this.matchingPairs=5,this.getMatchingPairsStorageData(),W(()=>{this.wordSets().length<ce&&this.getWordsSet()})}ionViewWillEnter(){this.getMatchingPairsStorageData(!0)}getMatchingPairsStorageData(e=!1){let t=this.localStorageService.getItem(y.MatchPairs);t===null?(this.matchingPairs=5,this.localStorageService.setItem(y.MatchPairs,this.matchingPairs)):(e&&this.matchingPairs!==t&&this.wordSets.set([]),this.matchingPairs=t)}getTextColor(){return this.wrongAnswer?"danger":this.isGameDone()?"success":"dark"}handleRefresh(){this.resetQuestion()}handleMistakeDismiss(){this.wrongAnswer=void 0,this.chosenAnswer=void 0}resetQuestion(){this.chosenAnswer=void 0,this.wrongAnswer=void 0,this.foundWords=[],this.wordSets.update(e=>e.splice(1))}answeredClicked(e,t){if(this.wordSets()[0]){if(e.id===this.chosenAnswer?.word?.id&&t===this.chosenAnswer?.left&&!this.isButtonFound(e)){this.chosenAnswer=void 0;return}this.chosenAnswer?t===this.chosenAnswer?.left?this.chosenAnswer={word:e,left:t}:t!==this.chosenAnswer?.left&&(this.chosenAnswer?.word?.id===e?.id?(this.foundWords.push(e),this.wrongAnswer=void 0,this.chosenAnswer=void 0,this.handleStatisticsUpdateAnswerStatus(!0)):(this.wrongAnswer=e,this.handleStatisticsUpdateAnswerStatus(!1))):this.chosenAnswer={word:e,left:t}}}handleStatisticsUpdateAnswerStatus(e){e?this.localStorageService.addMatchPageSuccess():this.localStorageService.addMatchPageFailure()}isGameDone(){return this.foundWords.length===le}isButtonFound(e){return this.foundWords.some(t=>t.id===e.id)}isButtonMistake(e){return this.wrongAnswer?.id===e.id}gelatin(e,t){return this.isButtonMistake(e)&&t!==this.chosenAnswer?.left||this.isButtonActiveChoice(e,t)||this.isButtonFound(e)}isButtonActiveChoice(e,t){return e.id===this.chosenAnswer?.word?.id&&t===this.chosenAnswer?.left&&!this.isButtonFound(e)}getButtonColor(e,t){if(this.wordSets()[0])return this.isButtonMistake(e)&&t!==this.chosenAnswer?.left?"danger":this.isButtonActiveChoice(e,t)?this.wrongAnswer?"danger":"warning":this.isButtonFound(e)?"success":"dark"}getWordsSet(){this.gsApiService.getRandomWords([],this.matchingPairs).pipe(F(e=>({left:this.utilityService.shuffleArray(e),right:this.utilityService.shuffleArray(e)})),D(1)).subscribe({next:e=>{this.wordSets.update(t=>(t.push(B({},e)),[...t]))},error:e=>{}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=E({type:r,selectors:[["app-matching-tab",8,"page"]],attrs:J,decls:9,vars:12,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"main-container"],[3,"isOpen","keyboardClose","backdropDismiss","handle","draggable","initialBreakpoint","breakpoints"],[1,"left"],[3,"animated"],[1,"right"],["fill","outline",3,"class","disabled","color"],["fill","outline",3,"click","disabled","color"],["shape","round",1,"next",3,"color"],["shape","round",1,"next",3,"click","color"]],template:function(t,d){t&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),g(3," Word Match "),a()()(),s(4,"ion-content",1),C(5,ie,7,2,"div",2)(6,oe,7,0,"div",2),a(),s(7,"ion-modal",3),I(8,ae,1,1,"ng-template"),a()),t&2&&(l("translucent",!0),o(4),l("forceOverscroll",!1)("fullscreen",!0),o(),v(d.wordSets().length?6:5),o(2),l("isOpen",d.isGameDone()||!!d.wrongAnswer)("keyboardClose",!1)("backdropDismiss",!1)("handle",!1)("draggable",!1)("initialBreakpoint",.15)("breakpoints",S(11,X)))},dependencies:[G,N,U,$,L,R,j,V],styles:[".main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);height:100%;justify-content:center;position:relative}.main-container[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:50px}.no-ripple[_ngcontent-%COMP%]{--ripple-color: transparent}.next[_ngcontent-%COMP%]{font-weight:700;margin:12px}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1rem;padding:.5rem}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;height:100%;justify-content:center;gap:8px}"]});let i=r;return i})();export{Se as MatchingTabPage};
