import{b as H}from"./chunk-Q5H3BEYG.js";import{a as $}from"./chunk-3GJPDCPF.js";import{b as z,c as G}from"./chunk-FLOFNB6L.js";import{a as N}from"./chunk-DEURAFZN.js";import{c as Q}from"./chunk-RPPZITL2.js";import"./chunk-BFU7CVPT.js";import"./chunk-QUJFQN2Y.js";import"./chunk-BDDVY7BC.js";import"./chunk-6V4WPGQW.js";import"./chunk-DNEKNMT2.js";import"./chunk-D2SLIFQS.js";import"./chunk-2EALETWC.js";import"./chunk-2LL6VPXJ.js";import"./chunk-7FY2OE2O.js";import"./chunk-LULO4UGN.js";import"./chunk-LFE7Q6OZ.js";import"./chunk-4CWAT2GN.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BI2UBLOO.js";import"./chunk-CKP3SGE2.js";import"./chunk-SLI65CWH.js";import{$ as g,Aa as M,C as _,G as y,L as c,Ob as x,Pa as D,Pb as F,Qb as L,Rb as A,U as b,aa as v,ba as E,ca as P,da as p,dc as X,ea as s,fa as l,fc as j,ga as w,ic as U,j as h,ma as k,qa as O,ra as I,sa as T,t as m,tb as R,xa as f,za as W}from"./chunk-ATREBLMD.js";import"./chunk-XE773CCY.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as C,b as S}from"./chunk-JHI3MBHO.js";var q=(i,o)=>o.id+"-"+i;function B(i,o){i&1&&(s(0,"div",4),w(1,"ion-icon",9),l())}function J(i,o){i&1&&(s(0,"div",5),w(1,"ion-icon",10),l())}function K(i,o){if(i&1&&(s(0,"div",8),f(1),l()),i&2){let a=k().$implicit;c(),W(' "',a.english_translation,'" ')}}function Y(i,o){if(i&1&&(s(0,"ion-card",3),g(1,B,2,0,"div",4)(2,J,2,0,"div",5),s(3,"ion-card-content")(4,"div",6)(5,"div",7),f(6),l(),g(7,K,2,1,"div",8),l()()()),i&2){let a=o.$implicit;p("id",a.id),c(),v(a.isSwipeRight?1:a.isSwipeLeft?2:-1),c(5),M(" ",a.article?a.article+" ":"","",a.german_translation," "),c(),v(a.isUnknown?7:-1)}}var pe=(()=>{let o=class o{constructor(){this.platform=m(R),this.gsApiService=m(N),this.cdr=m(D),this.gestureCtrl=m(H),this.localStorageService=m(Q),this.wordCards=_([]),$({checkmarkCircleOutline:z,closeCircleOutline:G})}ngAfterViewInit(){this.gsApiService.getRandomWords().pipe(h(1)).subscribe(t=>{this.wordCards.set([]),t.forEach(e=>{this.wordCards.update(r=>[...r,{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural}])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())})}useSwipeGesture(t){t.forEach(e=>{let r=this.gestureCtrl.create({el:e.nativeElement,onStart:()=>{},onMove:n=>{e.nativeElement.style.transform=`translateX(${n.deltaX}px) rotate(${n.deltaX/10}deg)`,n.deltaX>80?this.setWordData(e.nativeElement.id,!0,!1):n.deltaX<-80?this.setWordData(e.nativeElement.id,!1,!0):this.setWordData(e.nativeElement.id,!1,!1)},onEnd:n=>{e.nativeElement.style.transition=".5s ease-out",this.setWordData(e.nativeElement.id,!1,!1),n.deltaX>80?(e.nativeElement.style.transform=`translateX(${+this.platform.width()*2}px) rotate(${n.deltaX/2}deg)`,this.removeSuccessWordCard(e.nativeElement.id,r),this.documentSuccess(e.nativeElement.id)):n.deltaX<-80?(e.nativeElement.style.transform="",this.documentFailure(e.nativeElement.id),this.setWordData(e.nativeElement.id,void 0,void 0,!0)):e.nativeElement.style.transform="",this.cdr.detectChanges()},gestureName:"swipe"});r.enable(!0)}),this.cdr.detectChanges()}removeSuccessWordCard(t,e){setTimeout(()=>{this.wordCards.update(r=>r.filter(n=>n.id+""!=t+"")),e.destroy(),this.checkForLowNumberOfWordsInArray()},600)}checkForLowNumberOfWordsInArray(){this.wordCards().length<3&&this.gsApiService.getRandomWords(this.wordCards().map(t=>+t.id)).pipe(h(1)).subscribe(t=>{t.forEach(e=>{this.wordCards.update(r=>[{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural},...r])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())})}setWordData(t,e,r,n){this.wordCards.update(V=>V.map(d=>d.id+""!=t+""?d:S(C({},d),{isSwipeRight:e??d.isSwipeRight,isSwipeLeft:r??d.isSwipeLeft,isUnknown:n??d.isUnknown})))}documentSuccess(t){this.wordCards().some(e=>e.id+""===t&&!e.isUnknown)&&this.localStorageService.addSwiperPageSuccess()}documentFailure(t){this.wordCards().some(e=>e.id+""===t&&!e.isUnknown)&&this.localStorageService.addSwiperPageFailure()}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=b({type:o,selectors:[["app-swiper-tab"]],viewQuery:function(e,r){if(e&1&&O(x,5,y),e&2){let n;I(n=T())&&(r.cards=n)}},decls:8,vars:3,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"content-container"],[1,"word-card",3,"id"],[1,"success-overlay"],[1,"failure-overlay"],[1,"word-translation-container"],[1,"german-word-translation"],[1,"english-word-translation"],["name","checkmark-circle-outline",1,"success-icon"],["name","close-circle-outline",1,"success-icon"]],template:function(e,r){e&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),f(3,"Word Swipe"),l()()(),s(4,"ion-content",1)(5,"div",2),E(6,Y,8,5,"ion-card",3,q),l()()),e&2&&(p("translucent",!0),c(4),p("forceOverscroll",!1)("fullscreen",!0),c(2),P(r.wordCards()))},dependencies:[A,j,X,L,x,F,U],styles:[".word-card[_ngcontent-%COMP%]{height:130vw;width:90vw;position:absolute;border-radius:10px;max-height:80vh}.content-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;justify-content:center}.german-word-translation[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-text-color)}.english-word-translation[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-text-color-step-400)}ion-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;text-align:center;justify-content:center;gap:16px}.word-translation-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.success-overlay[_ngcontent-%COMP%]{-webkit-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;box-shadow:0 0 100px 20px #008000b3 inset;position:absolute;height:100%;width:100%;display:flex;text-align:center;justify-items:center;justify-content:center}.failure-overlay[_ngcontent-%COMP%]{display:flex;text-align:center;justify-items:center;justify-content:center;position:absolute;height:100%;width:100%;-webkit-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;box-shadow:0 0 100px 20px #ff0000b3 inset}.success-icon[_ngcontent-%COMP%]{font-size:50px;margin-top:85%;opacity:.5}"]});let i=o;return i})();export{pe as Tab1Page};
