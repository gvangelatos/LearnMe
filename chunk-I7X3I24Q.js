import{a as q}from"./chunk-LQ2Y3UW4.js";import{a as V,b as B}from"./chunk-KPCL6SX2.js";import{a as $,b as Q}from"./chunk-6A4THNCZ.js";import{$ as f,Aa as M,Ba as W,C as y,G as b,L as d,Qa as D,Rb as _,Sb as A,Tb as F,U as E,Wb as L,aa as h,ca as P,da as T,ea as p,ec as X,fa as s,ga as l,ha as u,j as x,jc as j,lc as U,md as N,na as w,oc as H,ra as k,sa as O,t as c,ta as I,ub as R,ya as g,yc as z,zc as G}from"./chunk-5KLYWDPG.js";import"./chunk-RZIBBJQ2.js";import"./chunk-QUJFQN2Y.js";import"./chunk-S66GZ3GW.js";import"./chunk-JJC7LCPG.js";import"./chunk-BWE55RDB.js";import"./chunk-VPLLFS7J.js";import"./chunk-DLFPG55H.js";import"./chunk-6HRV5MJL.js";import"./chunk-T77LZ5ZG.js";import"./chunk-BMJVVMK5.js";import"./chunk-QLURDETW.js";import"./chunk-KEHXJWBY.js";import"./chunk-OAAU2IJF.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-VRJJ5SCX.js";import"./chunk-CKP3SGE2.js";import"./chunk-POMS3W3A.js";import"./chunk-6YT5GN4E.js";import"./chunk-VDFYVGMU.js";import"./chunk-FS7NKJS5.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-SPMQWSIB.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as C,b as S}from"./chunk-2R6CW7ES.js";var K=(t,n)=>n.id+"-"+t;function Y(t,n){t&1&&(s(0,"ion-card",3)(1,"ion-card-content")(2,"div",4)(3,"div",5),u(4,"ion-skeleton-text",6),l()()()()),t&2&&(d(4),p("animated",!0))}function Z(t,n){t&1&&(s(0,"div",8),u(1,"ion-icon",11),l())}function ee(t,n){t&1&&(s(0,"div",9),u(1,"ion-icon",12),l())}function te(t,n){if(t&1&&(s(0,"div",10),g(1),l()),t&2){let r=w().$implicit;d(),M(' "',r.english_translation,'" ')}}function ie(t,n){if(t&1&&(s(0,"ion-card",7),f(1,Z,2,0,"div",8)(2,ee,2,0,"div",9),s(3,"ion-card-content")(4,"div",4)(5,"div",5),g(6),l(),f(7,te,2,1,"div",10),l()()()),t&2){let r=n.$implicit;p("id",r.id),d(),h(r.isSwipeRight?1:r.isSwipeLeft?2:-1),d(5),W(" ",r.article?r.article+" ":"","",r.german_translation," "),d(),h(r.isUnknown?7:-1)}}function ne(t,n){if(t&1&&P(0,ie,8,5,"ion-card",7,K),t&2){let r=w();T(r.wordCards())}}var we=(()=>{let n=class n{constructor(){this.platform=c(R),this.gsApiService=c(q),this.cdr=c(D),this.hapticsService=c(Q),this.gestureCtrl=c(V),this.localStorageService=c(N),this.affirmationToastService=c(B),this.wordCards=y([]),$({checkmarkCircleOutline:z,closeCircleOutline:G})}ngAfterViewInit(){this.gsApiService.getRandomWords().pipe(x(1)).subscribe({next:i=>{this.wordCards.set([]),i.forEach(e=>{this.wordCards.update(a=>[...a,{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural}])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())},error:i=>{}})}useSwipeGesture(i){i.forEach(e=>{let a=this.gestureCtrl.create({el:e.nativeElement,onStart:()=>{},onMove:o=>{e.nativeElement.style.transform=`translateX(${o.deltaX}px) rotate(${o.deltaX/10}deg)`,o.deltaX>80?this.setWordData(e.nativeElement.id,!0,!1):o.deltaX<-80?this.setWordData(e.nativeElement.id,!1,!0):this.setWordData(e.nativeElement.id,!1,!1)},onEnd:o=>{e.nativeElement.style.transition=".5s ease-out",this.setWordData(e.nativeElement.id,!1,!1),o.deltaX>80?(this.hapticsService.vibrateDefault(),e.nativeElement.style.transform=`translateX(${+this.platform.width()*2}px) rotate(${o.deltaX/2}deg)`,this.removeSuccessWordCard(e.nativeElement.id,a),this.documentSuccess(e.nativeElement.id),this.affirmationToastService.showPositiveToast()):o.deltaX<-80?(this.hapticsService.vibrateDefault(),e.nativeElement.style.transform="",this.documentFailure(e.nativeElement.id),this.setWordData(e.nativeElement.id,void 0,void 0,!0)):e.nativeElement.style.transform="",this.cdr.detectChanges()},gestureName:"swipe"});a.enable(!0)}),this.cdr.detectChanges()}removeSuccessWordCard(i,e){setTimeout(()=>{this.wordCards.update(a=>a.filter(o=>o.id+""!=i+"")),e.destroy(),this.checkForLowNumberOfWordsInArray()},600)}checkForLowNumberOfWordsInArray(){this.wordCards().length<3&&this.gsApiService.getRandomWords(this.wordCards().map(i=>+i.id)).pipe(x(1)).subscribe(i=>{i.forEach(e=>{this.wordCards.update(a=>[{id:e.id,isUnknown:!1,isSwipeRight:!1,isSwipeLeft:!1,article:e.article,english_translation:e.english_translation,german_translation:e.german_translation,isPlural:e.isPlural},...a])}),this.cdr.detectChanges(),this.useSwipeGesture(this.cards.toArray())})}setWordData(i,e,a,o){this.wordCards.update(J=>J.map(m=>m.id+""!=i+""?m:S(C({},m),{isSwipeRight:e??m.isSwipeRight,isSwipeLeft:a??m.isSwipeLeft,isUnknown:o??m.isUnknown})))}documentSuccess(i){this.wordCards().some(e=>e.id+""===i&&!e.isUnknown)&&this.localStorageService.addSwiperPageSuccess()}documentFailure(i){this.wordCards().some(e=>e.id+""===i&&!e.isUnknown)&&this.localStorageService.addSwiperPageFailure()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=E({type:n,selectors:[["app-swiper-tab"]],viewQuery:function(e,a){if(e&1&&k(_,5,b),e&2){let o;O(o=I())&&(a.cards=o)}},decls:8,vars:4,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"content-container"],[1,"word-card"],[1,"word-translation-container"],[1,"german-word-translation"],[3,"animated"],[1,"word-card",3,"id"],[1,"success-overlay"],[1,"failure-overlay"],[1,"english-word-translation"],["name","checkmark-circle-outline",1,"success-icon"],["name","close-circle-outline",1,"success-icon"]],template:function(e,a){e&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),g(3,"Word Swipe"),l()()(),s(4,"ion-content",1)(5,"div",2),f(6,Y,5,1,"ion-card",3)(7,ne,2,0),l()()),e&2&&(p("translucent",!0),d(4),p("forceOverscroll",!1)("fullscreen",!0),d(2),h(a.wordCards().length?7:6))},dependencies:[L,U,j,F,_,A,H,X],styles:[".word-card[_ngcontent-%COMP%]{height:130vw;width:90vw;position:absolute;border-radius:10px;max-height:80vh}.content-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;justify-content:center}.german-word-translation[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-text-color)}.german-word-translation[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:150px;height:40px}.english-word-translation[_ngcontent-%COMP%]{font-size:20px;color:var(--ion-text-color-step-400)}ion-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;text-align:center;justify-content:center;gap:16px}.word-translation-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.success-overlay[_ngcontent-%COMP%]{-webkit-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(0,128,0,.7) inset;box-shadow:0 0 100px 20px #008000b3 inset;position:absolute;height:100%;width:100%;display:flex;text-align:center;justify-items:center;justify-content:center}.failure-overlay[_ngcontent-%COMP%]{display:flex;text-align:center;justify-items:center;justify-content:center;position:absolute;height:100%;width:100%;-webkit-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;-moz-box-shadow:0 0 100px 20px rgba(255,0,0,.7) inset;box-shadow:0 0 100px 20px #ff0000b3 inset}.success-icon[_ngcontent-%COMP%]{font-size:50px;margin-top:85%;opacity:.5}"]});let t=n;return t})();export{we as Tab1Page};
