import{a as Q}from"./chunk-NPM64XPX.js";import{a as L}from"./chunk-DEURAFZN.js";import{c as H}from"./chunk-RPPZITL2.js";import{$ as w,$b as U,C as B,Ha as O,Ia as A,Jb as W,Ka as v,L as a,La as M,Mb as V,Na as E,Qb as G,Rb as R,Tb as N,U as P,Wa as I,Y as F,aa as x,ba as S,ca as C,d as T,da as d,dc as j,ea as s,fa as r,fc as $,ga as D,j as y,ka as f,la as _,ma as c,t as h,v as p,w as g,wa as b,xa as u,za as m}from"./chunk-ATREBLMD.js";import"./chunk-XE773CCY.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as k}from"./chunk-JHI3MBHO.js";var J=["class","page"],K=()=>[.15,.5],z=i=>({"choice-btn":!0,gelatin:i}),X=(i,o)=>o.english_translation+"-left-"+i,Y=(i,o)=>o.german_translation+"-right-"+i;function Z(i,o){i&1&&(s(0,"div",2)(1,"ion-label"),u(2,"Getting you a word..."),r(),D(3,"ion-spinner",5),r())}function ee(i,o){if(i&1){let n=f();s(0,"ion-button",9),_("click",function(){let t=p(n).$implicit,l=c(2);return g(l.answeredClicked(t,!0))}),u(1),v(2,"titlecase"),r()}if(i&2){let n=o.$implicit,e=c(2);b(A(7,z,e.gelatin(n,!0))),d("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!0)),a(),m(" ",M(2,5,n.english_translation)," ")}}function te(i,o){if(i&1){let n=f();s(0,"ion-button",9),_("click",function(){let t=p(n).$implicit,l=c(2);return g(l.answeredClicked(t,!1))}),u(1),v(2,"titlecase"),r()}if(i&2){let n=o.$implicit,e=c(2);b(A(7,z,e.gelatin(n,!1))),d("disabled",e.isButtonFound(n))("color",e.getButtonColor(n,!1)),a(),m(" ",M(2,5,n.german_translation)," ")}}function ie(i,o){if(i&1&&(s(0,"div",3)(1,"div",6),S(2,ee,3,9,"ion-button",7,X),r(),s(4,"div",8),S(5,te,3,9,"ion-button",7,Y),r()()),i&2){let n=c();a(2),C(n.wordSets()[0].left),a(3),C(n.wordSets()[0].right)}}function ne(i,o){if(i&1){let n=f();s(0,"ion-button",11),_("click",function(){p(n);let t=c(2);return g(t.wrongAnswer?t.handleMistakeDismiss():t.handleRefresh())}),u(1),r()}if(i&2){let n=c(2);d("color",n.getTextColor()),a(),m(" ",n.wrongAnswer?"Oops..!":"Next"," ")}}function oe(i,o){if(i&1&&w(0,ne,2,2,"ion-button",10),i&2){let n=c();x(n.isGameDone()||n.wrongAnswer?0:-1)}}var re=3,q=5,fe=(()=>{let o=class o{constructor(){this.gsApiService=h(L),this.utilityService=h(Q),this.localStorageService=h(H),this.wordSets=B([]),this.foundWords=[],E(()=>{this.wordSets().length<re&&this.getWordsSet()})}getTextColor(){return this.wrongAnswer?"danger":this.isGameDone()?"success":"dark"}handleRefresh(){this.resetQuestion()}handleMistakeDismiss(){this.wrongAnswer=void 0,this.chosenAnswer=void 0}resetQuestion(){this.chosenAnswer=void 0,this.wrongAnswer=void 0,this.foundWords=[],this.wordSets.update(e=>e.splice(1))}answeredClicked(e,t){if(this.wordSets()[0]){if(e.id===this.chosenAnswer?.word?.id&&t===this.chosenAnswer?.left&&!this.isButtonFound(e)){this.chosenAnswer=void 0;return}this.chosenAnswer?t===this.chosenAnswer?.left?this.chosenAnswer={word:e,left:t}:t!==this.chosenAnswer?.left&&(this.chosenAnswer?.word?.id===e?.id?(this.foundWords.push(e),this.wrongAnswer=void 0,this.chosenAnswer=void 0,this.handleStatisticsUpdateAnswerStatus(!0)):(this.wrongAnswer=e,this.handleStatisticsUpdateAnswerStatus(!1))):this.chosenAnswer={word:e,left:t}}}handleStatisticsUpdateAnswerStatus(e){e?this.localStorageService.addMatchPageSuccess():this.localStorageService.addMatchPageFailure()}isGameDone(){return this.foundWords.length===q}isButtonFound(e){return this.foundWords.some(t=>t.id===e.id)}isButtonMistake(e){return this.wrongAnswer?.id===e.id}gelatin(e,t){return this.isButtonMistake(e)&&t!==this.chosenAnswer?.left||this.isButtonActiveChoice(e,t)||this.isButtonFound(e)}isButtonActiveChoice(e,t){return e.id===this.chosenAnswer?.word?.id&&t===this.chosenAnswer?.left&&!this.isButtonFound(e)}getButtonColor(e,t){if(this.wordSets()[0])return this.isButtonMistake(e)&&t!==this.chosenAnswer?.left?"danger":this.isButtonActiveChoice(e,t)?this.wrongAnswer?"danger":"warning":this.isButtonFound(e)?"success":"dark"}getWordsSet(){this.gsApiService.getRandomWords([],q).pipe(T(e=>({left:this.utilityService.shuffleArray(e),right:this.utilityService.shuffleArray(e)})),y(1)).subscribe({next:e=>{this.wordSets.update(t=>(t.push(k({},e)),[...t]))},error:e=>{}})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=P({type:o,selectors:[["app-matching-tab",8,"page"]],attrs:J,decls:9,vars:12,consts:[[3,"translucent"],[3,"forceOverscroll","fullscreen"],[1,"spinner-container"],[1,"main-container"],[3,"isOpen","keyboardClose","backdropDismiss","handle","draggable","initialBreakpoint","breakpoints"],["name","lines-sharp"],[1,"left"],["fill","outline",3,"class","disabled","color"],[1,"right"],["fill","outline",3,"click","disabled","color"],["shape","round",1,"next",3,"color"],["shape","round",1,"next",3,"click","color"]],template:function(t,l){t&1&&(s(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),u(3," Word Match "),r()()(),s(4,"ion-content",1),w(5,Z,4,0,"div",2)(6,ie,7,0,"div",3),r(),s(7,"ion-modal",4),F(8,oe,1,1,"ng-template"),r()),t&2&&(d("translucent",!0),a(4),d("forceOverscroll",!1)("fullscreen",!0),a(),x(l.wordSets().length?6:5),a(2),d("isOpen",l.isGameDone()||!!l.wrongAnswer)("keyboardClose",!1)("backdropDismiss",!1)("handle",!1)("draggable",!1)("initialBreakpoint",.15)("breakpoints",O(11,K)))},dependencies:[V,G,R,j,$,N,U,W,I],styles:[".main-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);height:100%;justify-content:center;position:relative}.no-ripple[_ngcontent-%COMP%]{--ripple-color: transparent}.next[_ngcontent-%COMP%]{font-weight:700;margin:12px}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1rem;padding:.5rem}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;height:100%;justify-content:center;gap:8px}"]});let i=o;return i})();export{fe as MatchingTabPage};
